<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åœ£ç‹ä¼ å¥‡ - ç‚¹å‡»å¤åˆ¶é“¾æ¥</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#06b6d4;
      --radius:12px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: Inter, Roboto, "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#071025 0%, #0b1a2a 100%);
      color:#e6eef8; min-height:100vh; padding:20px;
    }
    .wrap{max-width:900px; margin:0 auto}
    header{text-align:center; margin-bottom:24px}
    header h1{font-size:22px; margin:0 0 6px 0}
    header p{margin:0; color:var(--muted); font-size:14px}

    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:14px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:var(--radius); padding:18px; cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 1px 0 rgba(255,255,255,0.02) inset, 0 6px 18px rgba(2,6,23,0.6);
      text-align:center;
    }
    .card:hover{box-shadow:0 8px 26px rgba(6,182,212,0.25)}
    .card:active{transform:translateY(1px)}
    .title{
      font-weight:700; font-size:18px; color:#fff; margin-bottom:6px;
      display:flex; justify-content:center; align-items:center; flex-wrap:wrap; gap:6px;
    }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      font-size:12px; font-weight:700; border-radius:999px;
      padding:2px 6px; box-shadow:0 1px 3px rgba(0,0,0,0.3);
    }
    .badge-new{background:#06b6d4; color:#022;}
    .badge-guild{background:#facc15; color:#222;}
    .badge-diamond{background:#38bdf8; color:#022;}
    .badge-old{background:#64748b; color:#fff;}
    .badge-merge{background:#ef4444; color:#fff;} /* åˆæœå¾½ç«  */
    .info{font-size:13px; color:var(--muted)}

    .toast{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:28px; background:linear-gradient(90deg,var(--accent),#7dd3fc);
      color:#022; padding:10px 16px; border-radius:999px;
      box-shadow:0 6px 24px rgba(6,22,34,0.6); font-weight:600;
      display:none; z-index:999;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>åœ£ç‹ä¼ å¥‡æœåŠ¡å™¨åˆ—è¡¨</h1>
      <p>ç‚¹å‡»ä»»æ„å¡ç‰‡å³å¯å¤åˆ¶å¯¹åº”æœåŠ¡å™¨çš„é“¾æ¥ï¼ˆæ—¶é—´åŸºäºåŒ—äº¬æ—¶é—´ UTC+8ï¼‰</p>
    </header>

    <div class="grid" id="cardContainer"></div>
  </div>

  <div id="toast" class="toast">å·²å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿</div>

  <script>
    // === æœåŠ¡å™¨æ•°æ®ï¼ˆåŒ…å« 2091 - 2108ï¼‰===
    const servers = [
      { id: 2091, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98471', openDate: '2025-10-06' },
      { id: 2092, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98472', openDate: '2025-10-07' },
      { id: 2093, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98473', openDate: '2025-10-08' },
      { id: 2094, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98474', openDate: '2025-10-09' },
      { id: 2095, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98475', openDate: '2025-10-10' },
      { id: 2096, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98476', openDate: '2025-10-11' },
      { id: 2097, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98477', openDate: '2025-10-12' },
      { id: 2098, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98478', openDate: '2025-10-13' },
      { id: 2099, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98479', openDate: '2025-10-14' },
      { id: 2100, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98480', openDate: '2025-10-15' },
      { id: 2101, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98481', openDate: '2025-10-16' },
      { id: 2102, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98482', openDate: '2025-10-17' },
      { id: 2103, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98483', openDate: '2025-10-18' },
      { id: 2104, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98484', openDate: '2025-10-19' },
      { id: 2105, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98485', openDate: '2025-10-20' },
      { id: 2106, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98486', openDate: '2025-10-21' },
      { id: 2107, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98487', openDate: '2025-10-22' },
      { id: 2108, url: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=98488', openDate: '2025-10-23' }
    ];

    // === åˆæœèŒƒå›´ï¼šä»… 2091 - 2097ï¼Œä¸”åˆæœä»â€œä»Šå¤©ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰0ç‚¹â€å¼€å§‹è®¡ç®— ===
    const mergedRange = { from: 2091, to: 2097 };

    const container = document.getElementById('cardContainer');
    const toast = document.getElementById('toast');

    // è·å–å½“å‰åŒ—äº¬æ—¶é—´ï¼ˆDate å¯¹è±¡ï¼‰
    function getBeijingNow() {
      const now = new Date();
      const beijingOffset = 8 * 60; // åˆ†é’Ÿæ•°
      const localOffset = now.getTimezoneOffset(); // æœ¬åœ°ä¸ UTC çš„åˆ†é’Ÿå·®
      const diffMin = beijingOffset + localOffset;
      return new Date(now.getTime() + diffMin * 60 * 1000);
    }

    // è·å–â€œä»Šæ—¥ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰00:00â€çš„ Date å¯¹è±¡
    function getBeijingStartOfToday() {
      const now = getBeijingNow();
      const year = now.getFullYear();
      const month = now.getMonth(); // 0-based
      const date = now.getDate();
      // ä½¿ç”¨æ„é€ å™¨å¹¶æŒ‡å®šä¸ºæœ¬åœ°æ—¶é—´ç­‰ä»·äºè¯¥æ—¶åŒºçš„åˆå¤œï¼Œä½†ä¸ºä¿é™©èµ·è§ï¼Œä½¿ç”¨ ISO å¸¦æ—¶åŒºå½¢å¼
      // æ„é€  yyyy-mm-ddT00:00:00+08:00
      const y = year.toString().padStart(4,'0');
      const m = (month + 1).toString().padStart(2,'0');
      const d = date.toString().padStart(2,'0');
      return new Date(`${y}-${m}-${d}T00:00:00+08:00`);
    }

    // === æ¸²æŸ“å¡ç‰‡ ===
    function renderCards() {
      container.innerHTML = '';

      const now = getBeijingNow();
      const todayWeekday = now.getDay(); // 0=å‘¨æ—¥, 3=å‘¨ä¸‰, 6=å‘¨å…­
      const mergeStart = getBeijingStartOfToday(); // åˆæœä»ä»Šå¤©åŒ—äº¬0ç‚¹å¼€å§‹

      servers.forEach(server => {
        const openDate = new Date(server.openDate + "T00:00:00+08:00"); // æ˜ç¡®å¼€æœä¸ºåŒ—äº¬æ—¶é—´ 0 ç‚¹
        const diffDays = Math.floor((now - openDate) / (1000 * 60 * 60 * 24));
        let infoText = '';
        let icons = '';

        if (diffDays < 0) {
          // æœªå¼€æœ
          infoText = `å¼€æœå€’è®¡æ—¶ ${Math.abs(diffDays)} å¤©`;
        } else {
          // å·²ç»å¼€æœï¼šä¸»ä¿¡æ¯ä¿ç•™â€œå¼€æœç¬¬ N å¤©â€ï¼ˆè‹¥è¶…è¿‡7å¤©åˆ™æ˜¾ç¤ºä¸ºâ€œå¼€æœå…± N å¤©â€ï¼‰
          if (diffDays < 7) {
            infoText = `å¼€æœç¬¬ ${diffDays + 1} å¤©`;
          } else {
            infoText = `å¼€æœå…± ${diffDays + 1} å¤©`;
          }

          // å¸¸è§å¾½ç« ï¼šæ–°æœ / æˆ˜æ—¥
          if (diffDays === 0) {
            icons += `<span class="badge badge-new">ğŸ†• æ–°æœ</span>`;
          }

          if (diffDays >= 3 && (todayWeekday === 3 || todayWeekday === 6)) {
            icons += `<span class="badge badge-diamond">ğŸ’ æˆ˜æ—¥</span>`;
          }

          // å…¬ä¼šæˆ˜å¾½ç« é€»è¾‘è°ƒæ•´ï¼š
          // - å¦‚æœè¯¥æœåœ¨åˆæœèŒƒå›´ï¼ˆ2091-2097ï¼‰ï¼Œç”¨â€œåˆæœç¬¬ X å¤©â€æ›¿ä»£å…¬ä¼šæˆ˜å¾½ç« ï¼›
          // - å¦åˆ™è‹¥ diffDays === 2 åˆ™æ˜¾ç¤ºå…¬ä¼šæˆ˜å¾½ç« ã€‚
          if (server.id >= mergedRange.from && server.id <= mergedRange.to) {
            const mergeDiffDays = Math.floor((now - mergeStart) / (1000 * 60 * 60 * 24));
            // åˆæœç¬¬å‡ å¤©ï¼Œä» 1 å¼€å§‹
            const mergeDayNum = mergeDiffDays >= 0 ? mergeDiffDays + 1 : 0;
            icons += `<span class="badge badge-merge">âš”ï¸ åˆæœç¬¬ ${mergeDayNum} å¤©</span>`;
          } else {
            if (diffDays === 2) {
              icons += `<span class="badge badge-guild">ğŸ‘‘ å…¬ä¼šæˆ˜</span>`;
            }
          }
        }

        const card = document.createElement('div');
        card.className = 'card';
        card.tabIndex = 0;
        card.innerHTML = `
          <div class="title">åœ£ç‹ä¼ å¥‡${server.id}æœ ${icons}</div>
          <div class="info">${infoText}</div>
        `;
        card.addEventListener('click', () => copyText(server.url));
        card.addEventListener('keydown', e => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            copyText(server.url);
          }
        });
        container.appendChild(card);
      });
    }

    // === å¤åˆ¶åŠŸèƒ½ ===
    function copyText(text){
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(showToast).catch(() => fallbackCopy(text));
      } else fallbackCopy(text);
    }

    function fallbackCopy(text){
      const ta = document.createElement('textarea');
      ta.value = text; ta.style.position='fixed'; ta.style.left='-9999px';
      document.body.appendChild(ta);
      ta.focus(); ta.select();
      try{document.execCommand('copy'); showToast();}catch(e){}
      ta.remove();
    }

    // === æç¤ºæ°”æ³¡ ===
    function showToast(){
      toast.style.display='block'; toast.style.opacity='1';
      setTimeout(()=>{
        toast.style.transition='opacity 300ms ease'; toast.style.opacity='0';
        setTimeout(()=>toast.style.display='none',300);
      },1000);
    }

    renderCards();
  </script>

  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <!-- è‹¥éœ€è¦åŠ è½½å…¬å…± footerï¼Œè¯·ä¿ç•™ä¸‹é¢çš„è„šæœ¬å¼•ç”¨ -->
  <!-- <script src="/load-footer.js"></script> -->
</body>
</html>
