<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ® æ¸¸æˆåŒºæœå¯¼èˆª</title>
  <!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
<style>
:root {
  --bg: #0b1428;
  --card: #111a33;
  --accent: #06b6d4;
  --hover: #0891b2;
  --text: #e5eef8;
  --muted: #9aa4b2;
}
body {
  background: var(--bg);
  color: var(--text);
  font-family: "Microsoft YaHei", Arial, sans-serif;
  margin: 0;
  padding: 12px;
}
.container {
  max-width: 1000px;
  margin: 0 auto;
}
h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 8px;
}
#time {
  text-align: center;
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 10px;
}
.tabs {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}
.tab {
  padding: 6px 12px;
  border-radius: 8px;
  background: #1a233c;
  color: var(--muted);
  border: 1px solid #1e293b;
  cursor: pointer;
  font-weight: 700;
}
.tab.active {
  background: linear-gradient(90deg, var(--accent), #7dd3fc);
  color: #022;
  border: none;
}
.controls {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}
.control-btn {
  border: 1px solid #1e293b;
  border-radius: 8px;
  padding: 8px 14px;
  font-weight: 700;
  background: #1a233c;
  color: var(--muted);
  cursor: pointer;
}
.control-btn.active {
  background: linear-gradient(90deg, var(--accent), #7dd3fc);
  color: #022;
  border: none;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 10px;
}
.card {
  background: var(--card);
  border-radius: 12px;
  padding: 10px;
  text-align: center;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
}
.title {
  font-weight: bold;
  margin-bottom: 6px;
}
.btn {
  display: inline-block;
  background: #1f2a4a;
  color: var(--text);
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid #2b3a5c;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  text-decoration: none;
  width: 100%;
  box-sizing: border-box;
}
.btn:hover {
  background: var(--hover);
  color: #022;
}
.badges {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}
.badge {
  background: var(--accent);
  color: #022;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: bold;
}
.badge-event {
  background: #f59e0b;
  color: #111;
}
.badge-platform {
  background: #8b5cf6;
  color: #fff;
}
.badge-check {
  background: #10b981;
  color: white;
}
.badge-new {
  background: #ec4899;
  color: white;
}
.badge-coming {
  background: #8b5cf6;
  color: white;
}
#toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent);
  color: #022;
  padding: 10px 18px;
  border-radius: 999px;
  font-weight: 700;
  box-shadow: 0 4px 12px rgba(6, 22, 34, 0.5);
  display: none;
  z-index: 999;
}
footer {
  text-align: center;
  color: var(--muted);
  font-size: 13px;
  margin-top: 15px;
}
.platform-switcher {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 10px 0;
  flex-wrap: wrap;
}
.platform-btn {
  padding: 6px 12px;
  border-radius: 8px;
  background: #1a233c;
  color: var(--muted);
  border: 1px solid #2b3a5c;
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
}
.platform-btn.active {
  background: linear-gradient(90deg, #8b5cf6, #a78bfa);
  color: white;
  border: none;
}
.server-info {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}
.check-mark {
  color: #10b981;
  margin-left: 4px;
  font-weight: bold;
}
.new-mark {
  color: #ec4899;
  margin-left: 4px;
  font-weight: bold;
}
.coming-soon {
  font-size: 12px;
  color: #8b5cf6;
  margin-top: 6px;
  font-weight: 600;
}
.status-indicator {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 6px;
}
.status-open {
  background-color: #10b981;
}
.status-coming {
  background-color: #8b5cf6;
}
.id-info {
  font-family: monospace;
  font-size: 11px;
  color: #9ca3af;
  margin-top: 2px;
}
</style>
</head>
<body>
<div class="container">
  <div id="time">åŒ—äº¬æ—¶é—´åŠ è½½ä¸­â€¦</div>
  <div class="controls">
    <button id="btnCopy" class="control-btn active">ğŸ“‹ å¤åˆ¶æ¨¡å¼</button>
    <button id="btnOpen" class="control-btn">ğŸ”— æ‰“å¼€æ¨¡å¼</button>
  </div>
  <div class="tabs" id="tabs"></div>
  
  <!-- åœ£ç‹ä¼ å¥‡å¹³å°åˆ‡æ¢å™¨ -->
  <div id="platformSwitcher" class="platform-switcher" style="display: none;">
    <button class="platform-btn active" data-platform="9awan">9aç©å¹³å°</button>
    <button class="platform-btn" data-platform="3uyy">3UYYå¹³å°</button>
    <button class="platform-btn" data-platform="aa4">AA4å¹³å°</button>
  </div>
  
  <div id="content"></div>
  <div id="toast"></div>
  <footer>å·²å°±ç»ª</footer>
</div>
<script>
let clickMode = 'copy';
let currentPlatform = '9awan'; // é»˜è®¤å¹³å°
let currentYJ = 'yx4f';
const MS_DAY = 86400000;

// è·å–ä»Šå¤©çš„æ—¥æœŸï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
function getTodayDate() {
  const now = new Date();
  const bj = new Date(now.getTime() + (8 * 60 - now.getTimezoneOffset()) * 60000);
  return bj.toLocaleDateString('zh-CN', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\//g, '-');
}

// è®¡ç®—ä»Šå¤©æ˜¯å‘¨å‡ ï¼ˆ0-6ï¼Œ0æ˜¯å‘¨æ—¥ï¼‰
function getTodayWeekday() {
  const now = new Date();
  const bj = new Date(now.getTime() + (8 * 60 - now.getTimezoneOffset()) * 60000);
  return bj.getDay(); // 0=å‘¨æ—¥, 1=å‘¨ä¸€, ..., 6=å‘¨å…­
}

// æ¸¸æˆæ•°æ®é…ç½®
const games = [
  {
    id: 'swcq',
    name: 'åœ£ç‹ä¼ å¥‡',
    platforms: {
      '9awan': {
        name: '9aç©å¹³å°',
        homepage: 'http://www.9awan.com/home/server/283',
        serverUrlTemplate: 'http://www.9awan.com/game.php?action=play&game_id=283&server_id=',
        servers: Array.from({length: 2116 - 2091 + 1}, (_, i) => ({show: 2091 + i, real: 98471 + i}))
      },
      '3uyy': {
        name: '3UYYå¹³å°',
        homepage: 'http://88.3uyy.com/home/server/283',
        serverUrlTemplate: 'http://88.3uyy.com/game.php?action=play&game_id=283&server_id=',
        servers: Array.from({length: 2116 - 2091 + 1}, (_, i) => ({show: 2091 + i, real: 98471 + i}))
      },
      'aa4': {
        name: 'AA4å¹³å°',
        homepage: 'http://www.aa4.cn/webgame/game/552',
        serverUrlTemplate: 'http://www.aa4.cn/webgame/into/552/',
        // AA4å¹³å°åŒºæœé…ç½®ï¼šæ ¹æ®æ—¥æœŸåŠ¨æ€å¼€æ”¾
        getServers: function() {
          const today = getTodayDate();
          
          // ä»2178åŒºå¼€å§‹ï¼ŒIDæ˜¯136334ï¼Œç„¶åé€’å¢
          // æ ¹æ®æ˜¾ç¤ºç¼–å·è®¡ç®—çœŸå®ID
          const calculateRealId = (showId) => {
            // 2178åŒºå¯¹åº”136334
            const baseShowId = 2178;
            const baseRealId = 136334;
            return baseRealId + (showId - baseShowId);
          };
          
          // åŸºç¡€åŒºæœæ•°æ®ï¼šæ˜¾ç¤ºç¼–å·ã€çœŸå®IDã€å¼€æ”¾æ—¥æœŸ
          const serverData = [
            // å·²å¼€æ”¾åŒºæœ (2168-2177ï¼Œä½¿ç”¨æ—§çš„ID)
            {show: 2168, real: 136262, openDate: '2024-01-01', special: false},
            {show: 2169, real: 136263, openDate: '2024-01-01', special: false},
            {show: 2170, real: 136264, openDate: '2024-01-01', special: false},
            {show: 2171, real: 136265, openDate: '2024-01-01', special: true},
            {show: 2172, real: 136266, openDate: '2024-01-01', special: false},
            {show: 2173, real: 136267, openDate: '2024-01-01', special: false},
            {show: 2174, real: 136268, openDate: '2024-01-01', special: false},
            {show: 2175, real: 136269, openDate: '2024-01-01', special: true},
            {show: 2176, real: 136270, openDate: '2024-01-01', special: false},
            {show: 2177, real: 136271, openDate: '2024-01-01', special: false},
            
            // ä»2178åŒºå¼€å§‹ä½¿ç”¨æ–°çš„IDè®¡ç®—è§„åˆ™
            {show: 2178, real: 136334, openDate: today, special: false, isNew: true},
            {show: 2179, real: calculateRealId(2179), openDate: today, special: false, isNew: true},
            {show: 2180, real: calculateRealId(2180), openDate: today, special: false, isNew: true},
            {show: 2181, real: calculateRealId(2181), openDate: today, special: false, isNew: true},
            {show: 2182, real: calculateRealId(2182), openDate: today, special: false, isNew: true},
            {show: 2183, real: calculateRealId(2183), openDate: today, special: false, isNew: true},
            {show: 2184, real: calculateRealId(2184), openDate: today, special: false, isNew: true},
            {show: 2185, real: calculateRealId(2185), openDate: today, special: false, isNew: true},
            {show: 2186, real: calculateRealId(2186), openDate: today, special: false, isNew: true},
            {show: 2187, real: calculateRealId(2187), openDate: today, special: false, isNew: true},
            {show: 2188, real: calculateRealId(2188), openDate: today, special: false, isNew: true},
            {show: 2189, real: calculateRealId(2189), openDate: today, special: false, isNew: true},
            {show: 2190, real: calculateRealId(2190), openDate: today, special: false, isNew: true},
            
            // æ–°å¢2191åŠä»¥åçš„åŒºæœ
            {show: 2191, real: calculateRealId(2191), openDate: this.getNextOpenDate(1), special: false},
            {show: 2192, real: calculateRealId(2192), openDate: this.getNextOpenDate(2), special: false},
            {show: 2193, real: calculateRealId(2193), openDate: this.getNextOpenDate(3), special: false},
            {show: 2194, real: calculateRealId(2194), openDate: this.getNextOpenDate(5), special: false},
            {show: 2195, real: calculateRealId(2195), openDate: this.getNextOpenDate(7), special: false},
            {show: 2196, real: calculateRealId(2196), openDate: this.getNextOpenDate(10), special: false},
            {show: 2197, real: calculateRealId(2197), openDate: this.getNextOpenDate(12), special: false},
            {show: 2198, real: calculateRealId(2198), openDate: this.getNextOpenDate(14), special: false},
            {show: 2199, real: calculateRealId(2199), openDate: this.getNextOpenDate(16), special: false},
            {show: 2200, real: calculateRealId(2200), openDate: this.getNextOpenDate(18), special: false},
            {show: 2201, real: calculateRealId(2201), openDate: this.getNextOpenDate(20), special: false},
            {show: 2202, real: calculateRealId(2202), openDate: this.getNextOpenDate(22), special: false},
            {show: 2203, real: calculateRealId(2203), openDate: this.getNextOpenDate(24), special: false},
            {show: 2204, real: calculateRealId(2204), openDate: this.getNextOpenDate(26), special: false},
            {show: 2205, real: calculateRealId(2205), openDate: this.getNextOpenDate(28), special: false},
            {show: 2206, real: calculateRealId(2206), openDate: this.getNextOpenDate(30), special: false},
            {show: 2207, real: calculateRealId(2207), openDate: this.getNextOpenDate(32), special: false},
            {show: 2208, real: calculateRealId(2208), openDate: this.getNextOpenDate(34), special: false}
          ];
          
          // è¿‡æ»¤å‡ºä»Šå¤©åŠä¹‹å‰å¼€æ”¾çš„åŒºæœ
          const todayServers = serverData.filter(server => {
            return this.isDateBeforeOrEqual(server.openDate, today);
          });
          
          console.log(`ä»Šå¤©æ—¥æœŸ: ${today}, å¼€æ”¾åŒºæœæ•°: ${todayServers.length}`);
          console.log('IDè®¡ç®—è§„åˆ™ï¼š2178åŒº=136334ï¼Œä¹‹åæ¯ä¸ªåŒº+1');
          return todayServers;
        },
        
        // è¾…åŠ©å‡½æ•°ï¼šè·å–æœªæ¥çš„å¼€æ”¾æ—¥æœŸ
        getNextOpenDate: function(daysFromNow) {
          const today = new Date(getTodayDate());
          const nextDate = new Date(today);
          nextDate.setDate(today.getDate() + daysFromNow);
          return nextDate.toLocaleDateString('zh-CN', { year: 'numeric', month: '2-digit', day: '2-digit' }).replace(/\//g, '-');
        },
        
        // è¾…åŠ©å‡½æ•°ï¼šæ¯”è¾ƒæ—¥æœŸ
        isDateBeforeOrEqual: function(date1, date2) {
          const d1 = new Date(date1);
          const d2 = new Date(date2);
          return d1 <= d2;
        }
      }
    },
    merges: [
      {from:2091,to:2097,date:'2025-10-28'},
      {from:2098,to:2104,date:'2025-10-31'},
      {from:2105,to:2111,date:'2025-11-02'}
    ],
    isMultiPlatform: true
  },
  {
    id: '111',
    name: 'æ»¡Våˆ‡å‰²ç¥åŸŸ',
    homepage: 'http://gm.yx4f.com:81/games/111.html',
    servers: [235,236,237,248,249,250,251,252,253,254,259,260,261,262,263,264,265,275,276,277],
    isMultiPlatform: false
  },
  {
    id: '115',
    name: 'æ»¡Væ‚ ä¹…ä¼ å¥‡',
    platforms: {
      'yx4f': {
        name: 'YX4Få¹³å°',
        homepage: 'http://gm.yx4f.com:81/games/115.html',
        serverUrlTemplate: 'http://gm.yx4f.com:81/login/115/',
        servers: [1,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123]
      },
      '962yx': {
        name: '962YXå¹³å°',
        homepage: 'http://gm.962yx.com/games/115.html',
        serverUrlTemplate: 'http://gm.962yx.com/login/115/',
        servers: [1,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123]
      }
    },
    isMultiPlatform: true
  },
  {
    id: '137',
    name: 'GMèµ¤ç„°æ— åŒ',
    homepage: 'http://gm.yx4f.com:81/games/137.html',
    servers: [1,2,3,4,5,6,7,8,9,10,11,12],
    isMultiPlatform: false
  },
  {
    id: 'ts',
    name: 'å± ç¥',
    homepage: 'http://www.8syx.com/game/7/',
    servers: [25,26,30,31,35],
    isMultiPlatform: false
  }
];

const toast = (msg)=>{
  const t = document.getElementById('toast');
  t.textContent = msg; t.style.display='block'; t.style.opacity='1';
  setTimeout(()=>{t.style.transition='opacity .3s'; t.style.opacity='0';
  setTimeout(()=>t.style.display='none',300);},1400);
};

function daysSince(dateStr){
  const s = new Date(dateStr+'T00:00:00+08:00');
  const t = new Date();
  const now = new Date(t.getTime()+(8*60 - t.getTimezoneOffset())*60000);
  const d = new Date(now.toLocaleDateString('en-CA')+'T00:00:00+08:00');
  return Math.floor((d-s)/MS_DAY)+1;
}

function renderTabs(){
  const tabs = document.getElementById('tabs');
  tabs.innerHTML='';
  games.forEach(g=>{
    const b=document.createElement('button');
    b.className='tab'+(g.id==='swcq'?' active':'');
    b.textContent=g.name;
    b.onclick=()=>{
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      showPlatformSwitcher(g.id);
      renderContent(g.id);
    };
    tabs.appendChild(b);
  });
}

function showPlatformSwitcher(gameId){
  const switcher = document.getElementById('platformSwitcher');
  const game = games.find(g => g.id === gameId);
  
  if (game && game.isMultiPlatform) {
    switcher.style.display = 'flex';
    // æ¸…é™¤ç°æœ‰æŒ‰é’®
    switcher.innerHTML = '';
    
    // ä¸ºæ¯ä¸ªå¹³å°åˆ›å»ºæŒ‰é’®
    Object.entries(game.platforms).forEach(([platformId, platform], index) => {
      const btn = document.createElement('button');
      btn.className = `platform-btn ${platformId === currentPlatform ? 'active' : ''}`;
      btn.textContent = platform.name;
      btn.dataset.platform = platformId;
      btn.onclick = () => {
        document.querySelectorAll('.platform-btn').forEach(x => x.classList.remove('active'));
        btn.classList.add('active');
        currentPlatform = platformId;
        toast(`å·²åˆ‡æ¢è‡³ ${platform.name}`);
        renderContent(gameId);
      };
      switcher.appendChild(btn);
    });
  } else {
    switcher.style.display = 'none';
  }
}

function renderContent(id){
  const box = document.getElementById('content');
  box.innerHTML='';
  const game = games.find(x => x.id === id);
  if(!game) return;
  
  const grid = document.createElement('div');
  grid.className='grid';

  if(id === 'swcq'){
    // åœ£ç‹ä¼ å¥‡ - å¤šå¹³å°æ”¯æŒ
    const platform = game.platforms[currentPlatform];
    
    // ä¸»é¡µæŒ‰é’®
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ“… å¼€æœè¡¨';
    homeBtn.href = platform.homepage;
    homeBtn.target = '_blank';
    const homeCard = document.createElement('div');
    homeCard.className = 'card';
    homeCard.appendChild(homeBtn);
    grid.appendChild(homeCard);
    
    // æ·»åŠ å¹³å°æ ‡è¯†
    const platformBadge = document.createElement('div');
    platformBadge.className = 'badge badge-platform';
    platformBadge.textContent = platform.name;
    homeCard.appendChild(platformBadge);

    const today = getTodayDate();
    const weekday = getTodayWeekday();
    
    // è·å–å½“å‰å¼€æ”¾çš„åŒºæœï¼ˆAA4å¹³å°åŠ¨æ€è·å–ï¼‰
    const servers = currentPlatform === 'aa4' ? platform.getServers() : platform.servers;
    
    // æ˜¾ç¤ºä»Šæ—¥ä¿¡æ¯
    const infoCard = document.createElement('div');
    infoCard.className = 'card';
    const infoTitle = document.createElement('div');
    infoTitle.className = 'title';
    infoTitle.textContent = `ğŸ“… ${today}`;
    infoCard.appendChild(infoTitle);
    
    const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
    const weekdayInfo = document.createElement('div');
    weekdayInfo.textContent = `ä»Šæ—¥ï¼š${weekdays[weekday]}`;
    weekdayInfo.style.fontSize = '14px';
    weekdayInfo.style.color = 'var(--muted)';
    infoCard.appendChild(weekdayInfo);
    
    const serverCount = document.createElement('div');
    serverCount.textContent = `å¼€æ”¾åŒºæœï¼š${servers.length}ä¸ª`;
    serverCount.style.fontSize = '14px';
    serverCount.style.color = 'var(--accent)';
    serverCount.style.marginTop = '4px';
    infoCard.appendChild(serverCount);
    
    // æ˜¾ç¤ºIDè®¡ç®—è§„åˆ™
    if (currentPlatform === 'aa4' && servers.length > 0) {
      const idRule = document.createElement('div');
      idRule.className = 'id-info';
      idRule.textContent = 'IDè§„åˆ™ï¼š2178=136334ï¼Œ+1é€’å¢';
      idRule.style.marginTop = '6px';
      infoCard.appendChild(idRule);
    }
    
    grid.appendChild(infoCard);
    
    // æ¸²æŸ“åŒºæœå¡ç‰‡
    servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      
      // æ ‡é¢˜éƒ¨åˆ†
      const title = document.createElement('div');
      title.className = 'title';
      
      // æ ¹æ®ä¸åŒç±»å‹è®¾ç½®æ ‡é¢˜
      if (s.special && s.isNew) {
        // æ—¢æ˜¯æ¨èåˆæ˜¯æ–°æœ
        title.innerHTML = `${s.show}åŒº <span class="check-mark">âœ…</span> <span class="new-mark">ğŸ†•</span>`;
      } else if (s.special) {
        // æ¨èåŒºæœ
        title.innerHTML = `${s.show}åŒº <span class="check-mark">âœ…</span>`;
      } else if (s.isNew) {
        // æ–°æœ
        title.innerHTML = `${s.show}åŒº <span class="new-mark">ğŸ†•</span>`;
      } else {
        // æ™®é€šåŒºæœ
        title.textContent = `${s.show}åŒº`;
      }
      card.appendChild(title);
      
      // æ˜¾ç¤ºæœåŠ¡å™¨IDä¿¡æ¯
      if (currentPlatform === 'aa4') {
        const info = document.createElement('div');
        info.className = 'server-info';
        info.textContent = `ID: ${s.real}`;
        card.appendChild(info);
        
        // æ˜¾ç¤ºå¼€æ”¾æ—¥æœŸ
        if (s.openDate) {
          const dateInfo = document.createElement('div');
          dateInfo.className = 'server-info';
          if (s.openDate === today) {
            dateInfo.innerHTML = `<span class="status-indicator status-open"></span>ä»Šæ—¥å¼€æ”¾`;
            dateInfo.style.color = '#10b981';
          } else {
            dateInfo.textContent = `å¼€æ”¾ï¼š${s.openDate}`;
          }
          card.appendChild(dateInfo);
        }
        
        // æ˜¾ç¤ºIDè®¡ç®—å¢é‡ï¼ˆä»2178å¼€å§‹ï¼‰
        if (s.show >= 2178) {
          const incrementInfo = document.createElement('div');
          incrementInfo.className = 'id-info';
          const increment = s.show - 2178;
          incrementInfo.textContent = `+${increment}`;
          card.appendChild(incrementInfo);
        }
      }
      
      // æ„å»ºé“¾æ¥
      let url;
      if (currentPlatform === 'aa4') {
        // AA4å¹³å°é“¾æ¥æ ¼å¼ï¼šhttp://www.aa4.cn/webgame/into/552/æœåŠ¡å™¨çœŸå®ID
        url = `${platform.serverUrlTemplate}${s.real}`;
      } else {
        // 9awanå’Œ3uyyå¹³å°
        url = `${platform.serverUrlTemplate}${s.real}`;
      }
      
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      
      // å¾½ç« åŒºåŸŸ
      const badges = document.createElement('div');
      badges.className = 'badges';
      
      // AA4å¹³å°æ˜¾ç¤ºç‰¹æ®Šæ ‡è®°
      if (currentPlatform === 'aa4') {
        if (s.special) {
          const specialBadge = document.createElement('div');
          specialBadge.className = 'badge badge-check';
          specialBadge.textContent = 'æ¨è';
          badges.appendChild(specialBadge);
        }
        
        if (s.isNew) {
          const newBadge = document.createElement('div');
          newBadge.className = 'badge badge-new';
          newBadge.textContent = 'æ–°æœ';
          badges.appendChild(newBadge);
        }
        
        if (s.openDate === today) {
          const todayBadge = document.createElement('div');
          todayBadge.className = 'badge badge-new';
          todayBadge.textContent = 'ä»Šæ—¥æ–°åŒº';
          badges.appendChild(todayBadge);
        }
        
        // æ ‡è®°ä»2178å¼€å§‹çš„åŒºæœ
        if (s.show === 2178) {
          const newRuleBadge = document.createElement('div');
          newRuleBadge.className = 'badge badge-coming';
          newRuleBadge.textContent = 'æ–°IDè§„åˆ™';
          badges.appendChild(newRuleBadge);
        }
        
        if (badges.children.length > 0) {
          card.appendChild(badges);
        }
      } else {
        // 9awanå’Œ3uyyå¹³å°æ˜¾ç¤ºåˆæœä¿¡æ¯
        const merge = game.merges.find(m => s.show >= m.from && s.show <= m.to);
        if(merge){
          const days = daysSince(merge.date);
          const dayBadge = document.createElement('div');
          dayBadge.className = 'badge';
          dayBadge.textContent = `åˆæœç¬¬${days}å¤©`;
          badges.appendChild(dayBadge);
          
          if(days === 3){
            const eventBadge = document.createElement('div');
            eventBadge.className = 'badge badge-event';
            eventBadge.textContent = 'ğŸ‘‘åŸä¸»æˆ˜';
            badges.appendChild(eventBadge);
          }
          
          if([3,6].includes(new Date().getDay())){
            const warBadge = document.createElement('div');
            warBadge.className = 'badge badge-event';
            warBadge.textContent = 'ğŸ°å…¬ä¼šæˆ˜æ—¥';
            badges.appendChild(warBadge);
          }
          
          card.appendChild(badges);
        }
      }
      
      grid.appendChild(card);
    });
    
  } else if(id === '115'){
    // æ»¡Væ‚ ä¹…ä¼ å¥‡ - å¤šå¹³å°æ”¯æŒ
    const platform = game.platforms[currentYJ];
    
    // ä¸»é¡µæŒ‰é’®
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ  æ¸¸æˆä¸»é¡µ';
    homeBtn.href = platform.homepage;
    homeBtn.target = '_blank';
    const homeCard = document.createElement('div');
    homeCard.className = 'card';
    homeCard.appendChild(homeBtn);
    grid.appendChild(homeCard);
    
    // å¹³å°åˆ‡æ¢æŒ‰é’®
    const switchBtn = document.createElement('a');
    switchBtn.className = 'btn';
    switchBtn.textContent = 'ğŸŒ åˆ‡æ¢å¹³å°';
    switchBtn.onclick = (e) => {
      e.preventDefault();
      currentYJ = currentYJ === 'yx4f' ? '962yx' : 'yx4f';
      toast(`å·²åˆ‡æ¢è‡³ ${game.platforms[currentYJ].name}`);
      renderContent('115');
    };
    const switchCard = document.createElement('div');
    switchCard.className = 'card';
    switchCard.appendChild(switchBtn);
    grid.appendChild(switchCard);
    
    // æ·»åŠ å¹³å°æ ‡è¯†
    const platformBadge = document.createElement('div');
    platformBadge.className = 'badge badge-platform';
    platformBadge.textContent = platform.name;
    switchCard.appendChild(platformBadge);
    
    // åŒºæœåˆ—è¡¨
    platform.servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = `${s}åŒº`;
      card.appendChild(title);
      
      const url = `${platform.serverUrlTemplate}${s}.html`;
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      grid.appendChild(card);
    });
    
  } else {
    // å…¶ä»–å•å¹³å°æ¸¸æˆ
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ  æ¸¸æˆä¸»é¡µ';
    homeBtn.href = game.homepage;
    homeBtn.target = '_blank';
    const hcard = document.createElement('div');
    hcard.className = 'card';
    hcard.appendChild(homeBtn);
    grid.appendChild(hcard);
    
    game.servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = `${s}åŒº`;
      card.appendChild(title);
      
      let url = '#';
      if(id === '111'){
        url = `http://gm.yx4f.com:81/login/111/${s}.html`;
      } else if(id === '137'){
        url = `http://gm.yx4f.com:81/login/137/${s}.html`;
      } else if(id === 'ts'){
        url = `http://www.8syx.com/Game/gameto.php?gid=7&sid=${s}`;
      }
      
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      grid.appendChild(card);
    });
  }
  
  box.appendChild(grid);
}

function init(){
  // æ›´æ–°æ—¶é—´æ˜¾ç¤º
  const tick = () => {
    const now = new Date();
    const bj = new Date(now.getTime()+(8*60-now.getTimezoneOffset())*60000);
    document.getElementById('time').textContent = 'åŒ—äº¬æ—¶é—´ï¼š'+bj.toLocaleString('zh-CN',{hour12:false});
    
    // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æ˜¯å¦éœ€è¦åˆ·æ–°ï¼ˆç”¨äºè·¨æ—¥åˆ·æ–°ï¼‰
    const minutes = bj.getMinutes();
    if (minutes === 0) {
      // æ•´ç‚¹æ—¶æ£€æŸ¥ï¼Œå¦‚æœæ˜¯0ç‚¹åˆ™åˆ·æ–°é¡µé¢å†…å®¹
      const hours = bj.getHours();
      if (hours === 0 && currentPlatform === 'aa4') {
        console.log('æ£€æµ‹åˆ°æ–°çš„ä¸€å¤©ï¼Œåˆ·æ–°AA4åŒºæœåˆ—è¡¨');
        renderContent('swcq');
      }
    }
  };
  tick();
  setInterval(tick, 60000); // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
  
  // æ¯ç§’æ›´æ–°æ—¶é—´æ˜¾ç¤º
  setInterval(() => {
    const now = new Date();
    const bj = new Date(now.getTime()+(8*60-now.getTimezoneOffset())*60000);
    document.getElementById('time').textContent = 'åŒ—äº¬æ—¶é—´ï¼š'+bj.toLocaleString('zh-CN',{hour12:false});
  }, 1000);
  
  // æ¸²æŸ“æ ‡ç­¾é¡µ
  renderTabs();
  
  // æ˜¾ç¤ºå¹³å°åˆ‡æ¢å™¨
  showPlatformSwitcher('swcq');
  
  // åˆå§‹æ¸²æŸ“å†…å®¹
  renderContent('swcq');
  
  // ç»‘å®šæ§åˆ¶æŒ‰é’®äº‹ä»¶
  const btnCopy = document.getElementById('btnCopy');
  const btnOpen = document.getElementById('btnOpen');
  
  btnCopy.onclick = () => {
    clickMode = 'copy';
    btnCopy.classList.add('active');
    btnOpen.classList.remove('active');
    toast('å¤åˆ¶æ¨¡å¼');
  };
  
  btnOpen.onclick = () => {
    clickMode = 'open';
    btnOpen.classList.add('active');
    btnCopy.classList.remove('active');
    toast('æ‰“å¼€æ¨¡å¼');
  };
  
  // æ·»åŠ é¡µé¢å¯è§æ€§æ£€æµ‹ï¼Œå½“é¡µé¢é‡æ–°å¯è§æ—¶åˆ·æ–°
  document.addEventListener('visibilitychange', function() {
    if (!document.hidden && currentPlatform === 'aa4') {
      // é¡µé¢é‡æ–°å¯è§æ—¶åˆ·æ–°AA4åŒºæœ
      renderContent('swcq');
    }
  });
}

// åˆå§‹åŒ–
init();
</script>
    <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
