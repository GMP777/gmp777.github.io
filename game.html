<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ® æ¸¸æˆåŒºæœå¯¼èˆª</title>
  <!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
<style>
:root {
  --bg: #0b1428;
  --card: #111a33;
  --accent: #06b6d4;
  --hover: #0891b2;
  --text: #e5eef8;
  --muted: #9aa4b2;
}
body {
  background: var(--bg);
  color: var(--text);
  font-family: "Microsoft YaHei", Arial, sans-serif;
  margin: 0;
  padding: 12px;
}
.container {
  max-width: 1000px;
  margin: 0 auto;
}
h1 {
  text-align: center;
  font-size: 20px;
  margin-bottom: 8px;
}
#time {
  text-align: center;
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 10px;
}
.tabs {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-bottom: 12px;
}
.tab {
  padding: 6px 12px;
  border-radius: 8px;
  background: #1a233c;
  color: var(--muted);
  border: 1px solid #1e293b;
  cursor: pointer;
  font-weight: 700;
}
.tab.active {
  background: linear-gradient(90deg, var(--accent), #7dd3fc);
  color: #022;
  border: none;
}
.controls {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}
.control-btn {
  border: 1px solid #1e293b;
  border-radius: 8px;
  padding: 8px 14px;
  font-weight: 700;
  background: #1a233c;
  color: var(--muted);
  cursor: pointer;
}
.control-btn.active {
  background: linear-gradient(90deg, var(--accent), #7dd3fc);
  color: #022;
  border: none;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 10px;
}
.card {
  background: var(--card);
  border-radius: 12px;
  padding: 10px;
  text-align: center;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
}
.title {
  font-weight: bold;
  margin-bottom: 6px;
}
.btn {
  display: inline-block;
  background: #1f2a4a;
  color: var(--text);
  padding: 8px 10px;
  border-radius: 8px;
  border: 1px solid #2b3a5c;
  cursor: pointer;
  font-weight: 700;
  font-size: 14px;
  text-decoration: none;
  width: 100%;
  box-sizing: border-box;
}
.btn:hover {
  background: var(--hover);
  color: #022;
}
.badges {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}
.badge {
  background: var(--accent);
  color: #022;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: bold;
}
.badge-platform {
  background: #8b5cf6;
  color: #fff;
}
.badge-check {
  background: #10b981;
  color: white;
}
#toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent);
  color: #022;
  padding: 10px 18px;
  border-radius: 999px;
  font-weight: 700;
  box-shadow: 0 4px 12px rgba(6, 22, 34, 0.5);
  display: none;
  z-index: 999;
}
footer {
  text-align: center;
  color: var(--muted);
  font-size: 13px;
  margin-top: 15px;
}
.platform-switcher {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 10px 0;
  flex-wrap: wrap;
}
.platform-btn {
  padding: 6px 12px;
  border-radius: 8px;
  background: #1a233c;
  color: var(--muted);
  border: 1px solid #2b3a5c;
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
}
.platform-btn.active {
  background: linear-gradient(90deg, #8b5cf6, #a78bfa);
  color: white;
  border: none;
}
.server-info {
  font-size: 12px;
  color: var(--muted);
  margin-top: 4px;
}
.check-mark {
  color: #10b981;
  margin-left: 4px;
  font-weight: bold;
}
.swcq-simple-card {
  background: var(--card);
  border-radius: 12px;
  padding: 12px;
  text-align: center;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
}
.swcq-check {
  color: #10b981;
  margin-left: 4px;
}
.new-server-tab {
  background: linear-gradient(90deg, #ec4899, #8b5cf6);
  color: white;
}
.crown-badge {
  background: linear-gradient(90deg, #fbbf24, #f59e0b);
  color: #78350f;
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: bold;
  margin-top: 4px;
  display: inline-block;
}
.server-title {
  font-weight: bold;
  margin-bottom: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}
.crown-mark {
  color: #fbbf24;
}
.reminder-card {
  background: linear-gradient(90deg, #1e293b, #334155);
  border-left: 4px solid #fbbf24;
  padding: 10px;
  margin: 10px 0;
  border-radius: 8px;
}
.reminder-title {
  color: #fbbf24;
  font-weight: bold;
  margin-bottom: 4px;
}
.reminder-text {
  font-size: 13px;
  color: var(--muted);
}
.auto-add-btn {
  background: linear-gradient(90deg, #10b981, #34d399);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  margin: 5px;
  cursor: pointer;
  font-weight: 600;
}
</style>
</head>
<body>
<div class="container">
  <div id="time">åŒ—äº¬æ—¶é—´åŠ è½½ä¸­â€¦</div>
  <div class="controls">
    <button id="btnCopy" class="control-btn active">ğŸ“‹ å¤åˆ¶æ¨¡å¼</button>
    <button id="btnOpen" class="control-btn">ğŸ”— æ‰“å¼€æ¨¡å¼</button>
  </div>
  <div class="tabs" id="tabs"></div>
  
  <!-- å¹³å°åˆ‡æ¢å™¨ - åŠ¨æ€æ˜¾ç¤º -->
  <div id="platformSwitcher" class="platform-switcher" style="display: none;"></div>
  
  <!-- æ™ºèƒ½æé†’åŒºåŸŸ -->
  <div id="reminderContainer" style="display: none;"></div>
  
  <div id="content"></div>
  <div id="toast"></div>
  <footer>å·²å°±ç»ª</footer>
</div>
<script>
let clickMode = 'copy';
let currentPlatform = 'aa4'; // é»˜è®¤é€‰æ‹©AA4å¹³å°
let currentYJ = 'yx4f'; // æ‚ ä¹…ä¼ å¥‡é»˜è®¤å¹³å°

// è‡ªå®šä¹‰åŒºæœæ˜ å°„ï¼ˆåœ¨è¿™é‡Œä¿®æ”¹ï¼‰
const customServersMap = {
  // æ ¼å¼ï¼šåŒºæœå·: ID
  // ç¤ºä¾‹ï¼š"2183": 136339
  // å¦‚æœæœ‰ç‰¹æ®ŠåŒºæœå°±åœ¨è¿™é‡Œæ·»åŠ 
};

// è·å–å½“å‰åŒ—äº¬æ—¶é—´
function getBeijingTime() {
  const now = new Date();
  // åŒ—äº¬æ—¶é—´æ˜¯UTC+8
  const beijingTime = new Date(now.getTime() + (8 * 60 * 60 * 1000));
  return beijingTime;
}

// è·å–ä»Šå¤©çš„æ—¥æœŸï¼ˆåŒ—äº¬æ—¶é—´ï¼‰
function getTodayDate() {
  const beijingTime = getBeijingTime();
  const year = beijingTime.getUTCFullYear();
  const month = String(beijingTime.getUTCMonth() + 1).padStart(2, '0');
  const day = String(beijingTime.getUTCDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
}

// æ ¼å¼åŒ–æ—¥æœŸä¸ºYYYY-MM-DD
function formatDate(date) {
  const year = date.getUTCFullYear();
  const month = String(date.getUTCMonth() + 1).padStart(2, '0');
  const day = String(date.getUTCDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
}

// è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å·®
function getDaysBetween(dateStr1, dateStr2) {
  const date1 = new Date(dateStr1 + 'T00:00:00Z');
  const date2 = new Date(dateStr2 + 'T00:00:00Z');
  const diffTime = Math.abs(date2 - date1);
  return Math.floor(diffTime / (1000 * 60 * 60 * 24));
}

// è®¡ç®—å¼€æœå¤©æ•°ï¼ˆå¼€æœå½“å¤©ä¸ºç¬¬ä¸€å¤©ï¼‰
function getDaysSinceOpen(openDateStr) {
  const today = getTodayDate();
  const days = getDaysBetween(openDateStr, today) + 1; // å¼€æœå½“å¤©ä¸ºç¬¬ä¸€å¤©
  return Math.max(1, days); // æœ€å°‘ä¸º1å¤©
}

// åœ£ç‹ä¼ å¥‡åŒºæœå¼€æœæ—¥æœŸåŸºå‡†é…ç½®
const swcqOpenDates = {
  // å·²çŸ¥çš„åŸºå‡†åŒºæœå¼€æœæ—¥æœŸ
  2183: '2026-01-06', // åŸºå‡†ç‚¹1ï¼š2183åŒºå¼€æœæ—¥æœŸ
  2191: '2026-01-14', // åŸºå‡†ç‚¹2ï¼š2191åŒºå¼€æœæ—¥æœŸï¼ˆæ–°æœå¼€å§‹ï¼‰
};

// å¼€æœè§„åˆ™é…ç½®
const swcqOpenRules = {
  // 2183åŒºå¼€å§‹çš„æ™®é€šåŒºæœå¼€æœè§„åˆ™
  baseRule: {
    startServer: 2183,
    startDate: '2026-01-06',
    interval: 1, // æ¯å¤©å¼€ä¸€ä¸ªåŒº
  },
  // 2191åŒºå¼€å§‹çš„æ–°æœå¼€æœè§„åˆ™
  newRule: {
    startServer: 2191,
    startDate: '2026-01-14',
    interval: 1, // æ¯å¤©å¼€ä¸€ä¸ªåŒº
  }
};

// æ ¹æ®åŒºæœå·è‡ªåŠ¨æ¨ç®—å¼€æœæ—¥æœŸ
function calculateOpenDateByServerNumber(showId) {
  // è§„åˆ™1ï¼š2183-2190åŒºéµå¾ªåŸºç¡€è§„åˆ™ï¼ˆæ¯å¤©ä¸€ä¸ªåŒºï¼‰
  if (showId >= 2183 && showId <= 2190) {
    const baseRule = swcqOpenRules.baseRule;
    const startDate = new Date(baseRule.startDate + 'T00:00:00Z');
    const daysDiff = (showId - baseRule.startServer) * baseRule.interval;
    startDate.setUTCDate(startDate.getUTCDate() + daysDiff);
    return formatDate(startDate);
  }
  
  // è§„åˆ™2ï¼š2191åŠä»¥åçš„åŒºæœéµå¾ªæ–°æœè§„åˆ™
  if (showId >= 2191) {
    const newRule = swcqOpenRules.newRule;
    const startDate = new Date(newRule.startDate + 'T00:00:00Z');
    const daysDiff = (showId - newRule.startServer) * newRule.interval;
    startDate.setUTCDate(startDate.getUTCDate() + daysDiff);
    return formatDate(startDate);
  }
  
  // è§„åˆ™3ï¼š2168-2177åŒºï¼ˆè¾ƒè€çš„åŒºæœï¼‰
  if (showId >= 2168 && showId <= 2177) {
    // è¿™äº›åŒºæœåœ¨2183åŒºä¹‹å‰ï¼ŒæŒ‰å€’æ¨è®¡ç®—
    const baseDate = '2026-01-06'; // 2183åŒºå¼€æœæ—¥æœŸ
    const baseServer = 2183;
    const startDate = new Date(baseDate + 'T00:00:00Z');
    const daysDiff = (showId - baseServer); // è´Ÿå€¼ï¼Œè¡¨ç¤ºä¹‹å‰å¼€çš„åŒº
    startDate.setUTCDate(startDate.getUTCDate() + daysDiff);
    return formatDate(startDate);
  }
  
  return null; // æ— æ³•æ¨ç®—
}

// æ ¹æ®åŒºæœIDæ¨ç®—å¼€æœæ—¥æœŸï¼ˆåŸºäºå·²çŸ¥åŒºæœçš„å¼€æœè§„å¾‹ï¼‰
function calculateOpenDateByServerId(showId, realId) {
  // é¦–å…ˆå°è¯•æ ¹æ®åŒºæœå·æ¨ç®—
  const dateByNumber = calculateOpenDateByServerNumber(showId);
  if (dateByNumber) {
    return dateByNumber;
  }
  
  // å¤‡ç”¨æ–¹æ³•ï¼šåŸºäºå·²çŸ¥çš„2183åŒºæ¨ç®—
  const referenceShowId = 2183;
  const referenceRealId = 136334;
  const referenceOpenDate = '2026-01-06';
  
  // è®¡ç®—åŒºæœé—´éš”
  const showIdDiff = showId - referenceShowId;
  const realIdDiff = realId - referenceRealId;
  
  // éªŒè¯IDé—´éš”æ˜¯å¦ä¸åŒºæœå·é—´éš”ä¸€è‡´ï¼ˆç¡®ä¿æ¨ç®—å‡†ç¡®ï¼‰
  if (showIdDiff === realIdDiff) {
    // ä»å‚è€ƒæ—¥æœŸå¼€å§‹ï¼Œæ¯å¤©å¼€ä¸€ä¸ªæ–°åŒº
    const openDate = new Date(referenceOpenDate + 'T00:00:00Z');
    openDate.setUTCDate(openDate.getUTCDate() + showIdDiff);
    return formatDate(openDate);
  }
  
  return null; // æ— æ³•æ¨ç®—
}

// æ™ºèƒ½æé†’ç³»ç»Ÿï¼šæ£€æµ‹éœ€è¦æ·»åŠ çš„åŒºæœ
function checkMissingServers() {
  const today = getTodayDate();
  const missingServers = [];
  const suggestions = [];
  const autoAddServers = []; // å¯ä»¥è‡ªåŠ¨æ·»åŠ çš„åŒºæœ
  
  // è·å–å½“å‰é…ç½®çš„æ‰€æœ‰åŒºæœ
  const swcqGame = games.find(g => g.id === 'swcq');
  const aa4Platform = swcqGame.platforms['aa4'];
  const currentServers = aa4Platform.getServers();
  
  // æ‰¾å‡ºæœ€å¤§çš„åŒºæœå·
  const maxServer = Math.max(...currentServers.map(s => s.show));
  
  // åŸºäºå¼€æœè§„å¾‹æ¨ç®—åº”è¯¥æœ‰å“ªäº›åŒºæœ
  // å·²çŸ¥ï¼šæ¯å¤©å¼€ä¸€ä¸ªæ–°åŒºï¼Œä»2183åŒºå¼€å§‹
  
  // æ¨ç®—ä»Šå¤©åº”è¯¥å¼€æ”¾çš„åŒºæœå·
  const daysSinceBase = getDaysBetween('2026-01-06', today);
  const expectedMaxServer = 2183 + Math.max(0, daysSinceBase);
  
  // æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„åŒºæœ
  if (expectedMaxServer > maxServer) {
    for (let showId = maxServer + 1; showId <= expectedMaxServer; showId++) {
      // æ ¹æ®è§„å¾‹è®¡ç®—çœŸå®ID
      const realId = 136334 + (showId - 2183);
      const calculatedOpenDate = calculateOpenDateByServerId(showId, realId);
      
      if (calculatedOpenDate) {
        const daysSinceOpen = getDaysSinceOpen(calculatedOpenDate);
        const shouldShowCrown = daysSinceOpen === 3;
        
        missingServers.push({
          show: showId,
          real: realId,
          openDate: calculatedOpenDate,
          daysSinceOpen: daysSinceOpen,
          shouldShowCrown: shouldShowCrown
        });
        
        // ç”Ÿæˆæ·»åŠ å»ºè®®
        suggestions.push(`{show: ${showId}, real: ${realId}, special: false}`);
        
        // è®°å½•å¯ä»¥è‡ªåŠ¨æ·»åŠ çš„åŒºæœ
        autoAddServers.push({
          show: showId,
          real: realId,
          openDate: calculatedOpenDate,
          special: false
        });
      }
    }
  }
  
  return { missingServers, suggestions, autoAddServers };
}

// æ¸¸æˆæ•°æ®é…ç½®
const games = [
  {
    id: 'swcq',
    name: 'åœ£ç‹ä¼ å¥‡',
    platforms: {
      '9awan': {
        name: '9aç©å¹³å°',
        homepage: 'http://www.9awan.com/home/server/283',
        // 9aç©å¹³å°åŒºæœé“¾æ¥æ ¼å¼
        getServers: function() {
          const servers = [];
          // 2091-2116åŒº
          for (let showId = 2091; showId <= 2116; showId++) {
            // 9awanå¹³å°ï¼š2091åŒºå¯¹åº”server_id=98471ï¼Œä¾æ¬¡é€’å¢
            const realId = 98471 + (showId - 2091);
            servers.push({
              show: showId,
              real: realId,
              special: false
            });
          }
          return servers;
        },
        // ç”Ÿæˆé“¾æ¥å‡½æ•°
        getServerUrl: function(server) {
          return `http://www.9awan.com/game.php?action=play&game_id=283&server_id=${server.real}`;
        }
      },
      '3uyy': {
        name: '3UYYå¹³å°',
        homepage: 'http://88.3uyy.com/home/server/283',
        // 3UYYå¹³å°åŒºæœé“¾æ¥æ ¼å¼
        getServers: function() {
          const servers = [];
          // 2091-2116åŒº
          for (let showId = 2091; showId <= 2116; showId++) {
            // 3uyyå¹³å°ï¼š2091åŒºå¯¹åº”server_id=98471ï¼Œä¾æ¬¡é€’å¢
            const realId = 98471 + (showId - 2091);
            servers.push({
              show: showId,
              real: realId,
              special: false
            });
          }
          return servers;
        },
        // ç”Ÿæˆé“¾æ¥å‡½æ•°
        getServerUrl: function(server) {
          return `http://88.3uyy.com/game.php?action=play&game_id=283&server_id=${server.real}`;
        }
      },
      'aa4': {
        name: 'AA4å¹³å°',
        homepage: 'http://www.aa4.cn/webgame/game/552',
        // æ™®é€šåŒºæœï¼ˆä¸åŒ…å«2178-2182ï¼‰
        getServers: function() {
          const today = getTodayDate();
          
          // ä»2178åŒºå¼€å§‹ï¼ŒIDæ˜¯136334ï¼Œç„¶åé€’å¢
          const calculateRealId = (showId) => {
            // 2178åŒºå¯¹åº”136334
            const baseShowId = 2178;
            const baseRealId = 136334;
            
            // é¦–å…ˆæ£€æŸ¥è‡ªå®šä¹‰æ˜ å°„
            if (customServersMap[showId]) {
              return customServersMap[showId];
            }
            
            // å¦åˆ™ä½¿ç”¨æ ‡å‡†è®¡ç®—
            return baseRealId + (showId - baseShowId);
          };
          
          // åŸºç¡€åŒºæœæ•°æ® - ç§»é™¤2178-2182
          const serverData = [
            // å·²å¼€æ”¾åŒºæœ (2168-2177ï¼Œä½¿ç”¨æ—§çš„ID)
            {show: 2168, real: 136262, special: false},
            {show: 2169, real: 136263, special: false},
            {show: 2170, real: 136264, special: false},
            {show: 2171, real: 136265, special: true},  // âœ…
            {show: 2172, real: 136266, special: false},
            {show: 2173, real: 136267, special: false},
            {show: 2174, real: 136268, special: false},
            {show: 2175, real: 136269, special: true},  // âœ…
            {show: 2176, real: 136270, special: false},
            {show: 2177, real: 136271, special: false},
            
            // ä»2183åŒºå¼€å§‹ä½¿ç”¨æ–°çš„IDè®¡ç®—è§„åˆ™ï¼ˆè·³è¿‡2178-2182ï¼‰
            {show: 2183, real: calculateRealId(2183)},
            {show: 2185, real: calculateRealId(2185)},
            {show: 2186, real: calculateRealId(2186)},
            {show: 2187, real: 136343, special: true},  // âœ…
            {show: 2188, real: calculateRealId(2188)},
            {show: 2189, real: calculateRealId(2189)},
            {show: 2190, real: calculateRealId(2190)},
            {show: 2192, real: 136348, special: true},  // âœ…
            {show: 2194, real: calculateRealId(2194)},
            {show: 2195, real: calculateRealId(2195)},
            {show: 2196, real: calculateRealId(2196)},
            {show: 2197, real: calculateRealId(2197)},
            {show: 2198, real: calculateRealId(2198)},
            {show: 2199, real: calculateRealId(2199)},
            {show: 2200, real: calculateRealId(2200)},
            {show: 2201, real: calculateRealId(2201)},
            {show: 2203, real: calculateRealId(2203)},
            {show: 2204, real: calculateRealId(2204)},
            {show: 2205, real: calculateRealId(2205)},
            {show: 2206, real: calculateRealId(2206)},
            {show: 2207, real: calculateRealId(2207)},
            {show: 2208, real: calculateRealId(2208)},
          ];
          
          // ä¸ºæ¯ä¸ªåŒºæœæ·»åŠ å¼€æœä¿¡æ¯ï¼ˆè‡ªåŠ¨æ¨ç®—ï¼‰
          return serverData.map(server => {
            let openDate = calculateOpenDateByServerNumber(server.show);
            
            // å¦‚æœæ²¡æœ‰æ¨ç®—å‡ºå¼€æœæ—¥æœŸï¼Œä½¿ç”¨é¢„é…ç½®çš„
            if (!openDate && swcqOpenDates[server.show]) {
              openDate = swcqOpenDates[server.show];
            }
            
            const daysSinceOpen = openDate ? getDaysSinceOpen(openDate) : 0;
            const shouldShowCrown = daysSinceOpen === 3; // å¼€æœç¬¬ä¸‰å¤©æ˜¾ç¤ºğŸ‘‘
            
            return {
              ...server,
              openDate: openDate,
              daysSinceOpen: daysSinceOpen,
              shouldShowCrown: shouldShowCrown
            };
          });
        },
        // ç”Ÿæˆé“¾æ¥å‡½æ•°
        getServerUrl: function(server) {
          return `http://www.aa4.cn/webgame/into/552/${server.real}`;
        }
      }
    },
    isMultiPlatform: true
  },
  {
    id: '111',
    name: 'æ»¡Våˆ‡å‰²ç¥åŸŸ',
    homepage: 'http://gm.yx4f.com:81/games/111.html',
    servers: [235,236,237,248,249,250,251,252,253,254,259,260,261,262,263,264,265,275,276,277],
    isMultiPlatform: false,
    getServerUrl: function(server) {
      return `http://gm.yx4f.com:81/login/111/${server}.html`;
    }
  },
  {
    id: '115',
    name: 'æ»¡Væ‚ ä¹…ä¼ å¥‡',
    platforms: {
      'yx4f': {
        name: 'YX4Få¹³å°',
        homepage: 'http://gm.yx4f.com:81/games/115.html',
        servers: [
          // åŸæœ‰åŒºæœ 1-123
          1, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,124, 125, 126, 127, 128, 129, 130, 131, 132,133,134,135,136,137,138,139
        ],
        getServerUrl: function(server) {
          return `http://gm.yx4f.com:81/login/115/${server}.html`;
        }
      },
      '962yx': {
        name: '962YXå¹³å°',
        homepage: 'http://gm.962yx.com/games/115.html',
        servers: [
          // åŸæœ‰åŒºæœ 1-123
          1, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123
        ],
        getServerUrl: function(server) {
          return `http://gm.962yx.com/login/115/${server}.html`;
        }
      }
    },
    isMultiPlatform: true
  },
  {
    id: '137',
    name: 'GMèµ¤ç„°æ— åŒ',
    homepage: 'http://gm.yx4f.com:81/games/137.html',
    servers: [1,2,3,4,5,6,7,8,9,10,11,12],
    isMultiPlatform: false,
    getServerUrl: function(server) {
      return `http://gm.yx4f.com:81/login/137/${server}.html`;
    }
  },
  {
    id: 'ts',
    name: 'å± ç¥',
    homepage: 'http://www.8syx.com/game/7/',
    servers: [25,26,30,31,35],
    isMultiPlatform: false,
    getServerUrl: function(server) {
      return `http://www.8syx.com/Game/gameto.php?gid=7&sid=${server}`;
    }
  }
];

// æ–°å¢æ¸¸æˆ - åœ£ç‹ä¼ å¥‡æ–°æœ
const newServersGame = {
  id: 'swcq_new',
  name: 'åœ£ç‹ä¼ å¥‡æ–°æœ',
  platforms: {
    'aa4': {
      name: 'AA4å¹³å°',
      homepage: 'http://www.aa4.cn/webgame/game/552',
      // åªè·å–æ–°æœ
      getServers: function() {
        const today = getTodayDate();
        
        // ä»2178åŒºå¼€å§‹ï¼ŒIDæ˜¯136334ï¼Œç„¶åé€’å¢
        const calculateRealId = (showId) => {
          // 2178åŒºå¯¹åº”136334
          const baseShowId = 2178;
          const baseRealId = 136334;
          
          // é¦–å…ˆæ£€æŸ¥è‡ªå®šä¹‰æ˜ å°„
          if (customServersMap[showId]) {
            return customServersMap[showId];
          }
          
          // å¦åˆ™ä½¿ç”¨æ ‡å‡†è®¡ç®—
          return baseRealId + (showId - baseShowId);
        };
        
        // è®¡ç®—ä»Šå¤©è·ç¦»åŸºå‡†æ—¥æœŸçš„å¤©æ•°
        const daysFromBase = getDaysBetween('2026-01-14', today);
        
        // 2191åŒºåŠä»¥åçš„æœ€å¤§åŒºæœç¼–å·ï¼ˆæ¯å¤©å¼€ä¸€ä¸ªæ–°åŒºï¼‰
        const maxServerShowId = 2191 + Math.max(0, daysFromBase);
        
        const newServers = [];
        
        // åŠ¨æ€ç”Ÿæˆ2191åŠä»¥åçš„åŒºæœ
        for (let showId = 2191; showId <= maxServerShowId; showId++) {
          // è‡ªåŠ¨æ¨ç®—å¼€æ”¾æ—¥æœŸ
          const openDateStr = calculateOpenDateByServerNumber(showId);
          
          if (openDateStr) {
            // è®¡ç®—å¼€æœå¤©æ•°ï¼ˆä»Šå¤©æ˜¯ç¬¬å‡ å¤©ï¼‰
            const daysSinceOpen = getDaysSinceOpen(openDateStr);
            
            newServers.push({
              show: showId,
              real: calculateRealId(showId),
              openDate: openDateStr,
              isNew: true,
              daysSinceOpen: daysSinceOpen
            });
          }
        }
        
        return newServers;
      },
      // ç”Ÿæˆé“¾æ¥å‡½æ•°
      getServerUrl: function(server) {
        return `http://www.aa4.cn/webgame/into/552/${server.real}`;
      }
    }
  },
  isMultiPlatform: true
};

const toast = (msg)=>{
  const t = document.getElementById('toast');
  t.textContent = msg; t.style.display='block'; t.style.opacity='1';
  setTimeout(()=>{t.style.transition='opacity .3s'; t.style.opacity='0';
  setTimeout(()=>t.style.display='none',300);},1400);
};

// æ˜¾ç¤ºæ™ºèƒ½æé†’
function showReminders() {
  const container = document.getElementById('reminderContainer');
  const { missingServers, suggestions, autoAddServers } = checkMissingServers();
  
  if (missingServers.length === 0) {
    container.style.display = 'none';
    return;
  }
  
  container.style.display = 'block';
  container.innerHTML = '';
  
  // åˆ›å»ºæé†’å¡ç‰‡
  const reminderCard = document.createElement('div');
  reminderCard.className = 'reminder-card';
  
  const reminderTitle = document.createElement('div');
  reminderTitle.className = 'reminder-title';
  reminderTitle.textContent = 'ğŸš¨ æ™ºèƒ½æé†’ï¼šéœ€è¦æ·»åŠ çš„åŒºæœ';
  reminderCard.appendChild(reminderTitle);
  
  const reminderText = document.createElement('div');
  reminderText.className = 'reminder-text';
  
  let html = `æ£€æµ‹åˆ° ${missingServers.length} ä¸ªç¼ºå¤±åŒºæœï¼š<br>`;
  
  missingServers.forEach(server => {
    html += `â€¢ ${server.show}åŒº (ID: ${server.real}) - å¼€æœæ—¥æœŸ: ${server.openDate} - å¼€æœå¤©æ•°: ${server.daysSinceOpen}å¤©`;
    if (server.shouldShowCrown) {
      html += ' ğŸ‘‘ (ä»Šå¤©ç¬¬ä¸‰å¤©ï¼Œéœ€è¦ğŸ‘‘æ ‡è®°)';
    }
    html += '<br>';
  });
  
  html += '<br><strong>å¼€æœè§„åˆ™è¯´æ˜ï¼š</strong><br>';
  html += 'â€¢ 2183åŒºï¼š2026-01-06å¼€æœï¼ˆåŸºå‡†ç‚¹ï¼‰<br>';
  html += 'â€¢ 2191åŒºï¼š2026-01-14å¼€æœï¼ˆæ–°æœèµ·ç‚¹ï¼‰<br>';
  html += 'â€¢ å¼€æœé—´éš”ï¼šæ¯å¤©å¼€æ”¾ä¸€ä¸ªæ–°åŒº<br><br>';
  
  html += '<strong>å»ºè®®æ·»åŠ åˆ°ä»£ç ä¸­çš„åŒºæœé…ç½®ï¼š</strong><br>';
  suggestions.forEach(suggestion => {
    html += `<code style="font-size: 11px;">${suggestion},</code><br>`;
  });
  
  html += '<br><em>æç¤ºï¼šç³»ç»Ÿå·²è‡ªåŠ¨ä¸ºæ–°åŒºæœè®¡ç®—å¼€æœæ—¥æœŸï¼Œå¼€æœæ—¥æœŸåŸºäº2183åŒºå’Œ2191åŒºä¸¤ä¸ªåŸºå‡†ç‚¹æ¨ç®—ã€‚</em>';
  
  reminderText.innerHTML = html;
  reminderCard.appendChild(reminderText);
  
  // æ·»åŠ è‡ªåŠ¨æ·»åŠ æŒ‰é’®ï¼ˆä»…æ¼”ç¤ºï¼Œå®é™…éœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼‰
  if (autoAddServers.length > 0) {
    const autoAddBtn = document.createElement('button');
    autoAddBtn.className = 'auto-add-btn';
    autoAddBtn.textContent = `ğŸ“ æŸ¥çœ‹è¯¦ç»†æ·»åŠ è¯´æ˜`;
    autoAddBtn.onclick = () => {
      let codeToAdd = '\n// éœ€è¦æ·»åŠ åˆ°serverDataæ•°ç»„ä¸­çš„é…ç½®ï¼š\n';
      autoAddServers.forEach(server => {
        codeToAdd += `{show: ${server.show}, real: ${server.real}, special: false},\n`;
      });
      codeToAdd += '\n// å¼€æœæ—¥æœŸä¼šè‡ªåŠ¨æ¨ç®—ï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®';
      alert(codeToAdd);
      toast('å·²ç”Ÿæˆæ·»åŠ ä»£ç ï¼Œè¯·å¤åˆ¶åˆ°é…ç½®ä¸­');
    };
    reminderCard.appendChild(autoAddBtn);
  }
  
  container.appendChild(reminderCard);
}

function renderTabs(){
  const tabs = document.getElementById('tabs');
  tabs.innerHTML='';
  
  // æ·»åŠ æ‰€æœ‰æ¸¸æˆæ ‡ç­¾
  games.forEach(g=>{
    const b=document.createElement('button');
    b.className='tab'+(g.id==='swcq'?' active':'');
    b.textContent=g.name;
    b.onclick=()=>{
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      b.classList.add('active');
      showPlatformSwitcher(g.id);
      renderContent(g.id);
    };
    tabs.appendChild(b);
  });
  
  // æ·»åŠ æ–°æœæ ‡ç­¾
  const newTab = document.createElement('button');
  newTab.className='tab new-server-tab';
  newTab.textContent='åœ£ç‹ä¼ å¥‡æ–°æœ';
  newTab.onclick=()=>{
    document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
    newTab.classList.add('active');
    showPlatformSwitcher(newServersGame.id);
    renderContent(newServersGame.id);
  };
  tabs.appendChild(newTab);
}

function showPlatformSwitcher(gameId){
  const switcher = document.getElementById('platformSwitcher');
  
  // å¦‚æœæ˜¯åœ£ç‹ä¼ å¥‡æˆ–æ–°æœï¼Œæ˜¾ç¤ºå¹³å°åˆ‡æ¢å™¨
  if (gameId === 'swcq' || gameId === 'swcq_new') {
    switcher.style.display = 'flex';
    // æ¸…é™¤ç°æœ‰æŒ‰é’®
    switcher.innerHTML = '';
    
    // ä¸ºæ¯ä¸ªå¹³å°åˆ›å»ºæŒ‰é’®
    let platforms;
    if (gameId === 'swcq') {
      platforms = games.find(g => g.id === 'swcq').platforms;
    } else {
      platforms = newServersGame.platforms;
    }
    
    Object.entries(platforms).forEach(([platformId, platform], index) => {
      const btn = document.createElement('button');
      
      // è®¾ç½®é»˜è®¤é€‰ä¸­çŠ¶æ€
      const isActive = platformId === currentPlatform;
      
      btn.className = `platform-btn ${isActive ? 'active' : ''}`;
      btn.textContent = platform.name;
      btn.dataset.platform = platformId;
      btn.onclick = () => {
        document.querySelectorAll('.platform-btn').forEach(x => x.classList.remove('active'));
        btn.classList.add('active');
        currentPlatform = platformId;
        toast(`å·²åˆ‡æ¢è‡³ ${platform.name}`);
        renderContent(gameId);
      };
      switcher.appendChild(btn);
    });
  } else if (gameId === '115') {
    // æ‚ ä¹…ä¼ å¥‡çš„å¹³å°åˆ‡æ¢å™¨
    switcher.style.display = 'flex';
    switcher.innerHTML = '';
    
    const game = games.find(g => g.id === '115');
    Object.entries(game.platforms).forEach(([platformId, platform], index) => {
      const btn = document.createElement('button');
      const isActive = platformId === currentYJ;
      
      btn.className = `platform-btn ${isActive ? 'active' : ''}`;
      btn.textContent = platform.name;
      btn.dataset.platform = platformId;
      btn.onclick = () => {
        document.querySelectorAll('.platform-btn').forEach(x => x.classList.remove('active'));
        btn.classList.add('active');
        currentYJ = platformId;
        toast(`å·²åˆ‡æ¢è‡³ ${platform.name}`);
        renderContent('115');
      };
      switcher.appendChild(btn);
    });
  } else {
    switcher.style.display = 'none';
  }
}

function renderContent(id){
  const box = document.getElementById('content');
  box.innerHTML='';
  
  let game;
  let isNewServer = false;
  
  if (id === 'swcq_new') {
    game = newServersGame;
    isNewServer = true;
  } else {
    game = games.find(x => x.id === id);
  }
  
  if(!game) return;
  
  const grid = document.createElement('div');
  grid.className='grid';

  if(id === 'swcq' || id === 'swcq_new'){
    // åœ£ç‹ä¼ å¥‡ - å¤šå¹³å°æ”¯æŒ
    const platform = game.platforms[currentPlatform];
    
    // ä¸»é¡µæŒ‰é’®
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ“… å¼€æœè¡¨';
    homeBtn.href = platform.homepage;
    homeBtn.target = '_blank';
    const homeCard = document.createElement('div');
    homeCard.className = 'card';
    homeCard.appendChild(homeBtn);
    grid.appendChild(homeCard);
    
    // æ·»åŠ å¹³å°æ ‡è¯†
    const platformBadge = document.createElement('div');
    platformBadge.className = 'badge badge-platform';
    platformBadge.textContent = platform.name;
    homeCard.appendChild(platformBadge);

    const today = getTodayDate();
    const beijingTime = getBeijingTime();
    const displayTime = beijingTime.toLocaleString('zh-CN', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: false
    }).replace(/\//g, '-');
    
    // è·å–å½“å‰å¼€æ”¾çš„åŒºæœ
    const servers = platform.getServers();
    
    // æ˜¾ç¤ºä»Šæ—¥ä¿¡æ¯
    const infoCard = document.createElement('div');
    infoCard.className = 'card';
    const infoTitle = document.createElement('div');
    infoTitle.className = 'title';
    infoTitle.textContent = `ğŸ“… ${today}`;
    infoCard.appendChild(infoTitle);
    
    const timeInfo = document.createElement('div');
    timeInfo.textContent = displayTime;
    timeInfo.style.fontSize = '12px';
    timeInfo.style.color = 'var(--muted)';
    timeInfo.style.marginTop = '2px';
    infoCard.appendChild(timeInfo);
    
    const serverCount = document.createElement('div');
    serverCount.textContent = `å¼€æ”¾åŒºæœï¼š${servers.length}ä¸ª`;
    serverCount.style.fontSize = '14px';
    serverCount.style.color = 'var(--accent)';
    serverCount.style.marginTop = '4px';
    infoCard.appendChild(serverCount);
    
    // æ˜¾ç¤ºå¼€æœè§„åˆ™è¯´æ˜ï¼ˆä»…é™åœ£ç‹ä¼ å¥‡AA4å¹³å°ï¼‰
    if (id === 'swcq' && currentPlatform === 'aa4') {
      const ruleInfo = document.createElement('div');
      ruleInfo.innerHTML = `ğŸ“… å¼€æœè§„åˆ™ï¼š<br>â€¢ 2183åŒºï¼š2026-01-06<br>â€¢ 2191åŒºï¼š2026-01-14<br>â€¢ æ¯å¤©å¼€ä¸€ä¸ªæ–°åŒº`;
      ruleInfo.style.fontSize = '12px';
      ruleInfo.style.color = 'var(--muted)';
      ruleInfo.style.marginTop = '4px';
      infoCard.appendChild(ruleInfo);
    }
    
    // æ˜¾ç¤ºä»Šæ—¥æ–°åŒºä¿¡æ¯ï¼ˆä»…é™åœ£ç‹ä¼ å¥‡AA4å¹³å°ï¼‰
    if (id === 'swcq' && currentPlatform === 'aa4') {
      const todayNewServer = servers.find(server => server.openDate === today);
      if (todayNewServer) {
        const newServerInfo = document.createElement('div');
        newServerInfo.textContent = `ğŸ‰ ä»Šæ—¥æ–°åŒºï¼š${todayNewServer.show}åŒº`;
        newServerInfo.style.fontSize = '14px';
        newServerInfo.style.color = '#ec4899';
        newServerInfo.style.fontWeight = 'bold';
        newServerInfo.style.marginTop = '4px';
        infoCard.appendChild(newServerInfo);
      }
      
      // æ˜¾ç¤ºä»Šå¤©éœ€è¦ğŸ‘‘æ ‡è®°çš„åŒºæœ
      const crownServers = servers.filter(server => server.shouldShowCrown);
      if (crownServers.length > 0) {
        const crownInfo = document.createElement('div');
        crownInfo.textContent = `ğŸ‘‘ ä»Šå¤©ç¬¬ä¸‰å¤©ï¼š${crownServers.map(s => s.show + 'åŒº').join(', ')}`;
        crownInfo.style.fontSize = '13px';
        crownInfo.style.color = '#fbbf24';
        crownInfo.style.fontWeight = 'bold';
        crownInfo.style.marginTop = '4px';
        infoCard.appendChild(crownInfo);
      }
    }
    
    // æ˜¾ç¤ºå¼€æœè§„åˆ™ï¼ˆä»…æ–°æœï¼‰
    if (isNewServer && servers.length > 0) {
      const openRule = document.createElement('div');
      openRule.textContent = 'å¼€æœè§„åˆ™ï¼š2026-01-14å¼€å¯2191åŒºï¼Œä¹‹åæ¯å¤©å¼€ä¸€ä¸ªæ–°åŒº';
      openRule.style.fontSize = '12px';
      openRule.style.color = 'var(--muted)';
      openRule.style.marginTop = '4px';
      infoCard.appendChild(openRule);
      
      // æ˜¾ç¤ºä¸‹ä¸€ä¸ªæ–°æœä¿¡æ¯
      const nextServer = servers[servers.length - 1];
      if (nextServer.openDate !== today) {
        const nextInfo = document.createElement('div');
        nextInfo.textContent = `ä¸‹ä¸€ä¸ªæ–°åŒºï¼š${nextServer.openDate} å¼€å¯${nextServer.show}åŒº`;
        nextInfo.style.fontSize = '12px';
        nextInfo.style.color = '#ec4899';
        nextInfo.style.marginTop = '2px';
        infoCard.appendChild(nextInfo);
      }
    }
    
    grid.appendChild(infoCard);
    
    // æ¸²æŸ“åŒºæœå¡ç‰‡
    servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'swcq-simple-card';
      
      // æ ‡é¢˜éƒ¨åˆ†
      const title = document.createElement('div');
      title.className = 'server-title';
      
      // æ˜¾ç¤ºåŒºæœå·
      const serverNumber = document.createElement('span');
      serverNumber.textContent = `${s.show}åŒº`;
      
      // æ·»åŠ ç‰¹æ®Šæ ‡è®°ï¼ˆæ™®é€šåœ£ç‹ä¼ å¥‡é¡µé¢ - AA4å¹³å°ï¼‰
      if (!isNewServer && currentPlatform === 'aa4') {
        title.appendChild(serverNumber);
        
        // æ˜¾ç¤ºâœ…æ ‡è®°ï¼ˆå¦‚æœæœ‰ï¼‰
        if (s.special) {
          const checkMark = document.createElement('span');
          checkMark.className = 'swcq-check';
          checkMark.textContent = 'âœ…';
          title.appendChild(checkMark);
        }
        
        // æ˜¾ç¤ºğŸ‘‘æ ‡è®°ï¼ˆå¼€æœç¬¬ä¸‰å¤©ï¼‰
        if (s.shouldShowCrown) {
          const crownMark = document.createElement('span');
          crownMark.className = 'crown-mark';
          crownMark.textContent = 'ğŸ‘‘';
          crownMark.title = 'å¼€æœç¬¬ä¸‰å¤©æ´»åŠ¨';
          title.appendChild(crownMark);
        }
      } else {
        title.appendChild(serverNumber);
      }
      
      card.appendChild(title);
      
      // æ˜¾ç¤ºæœåŠ¡å™¨IDï¼ˆä»…aa4å¹³å°ï¼‰
      if (currentPlatform === 'aa4') {
        const idInfo = document.createElement('div');
        idInfo.className = 'server-info';
        idInfo.textContent = `ID: ${s.real}`;
        card.appendChild(idInfo);
      }
      
      // æ˜¾ç¤ºå¼€æœä¿¡æ¯ï¼ˆä»…é™åœ£ç‹ä¼ å¥‡AA4å¹³å°ï¼‰
      if (id === 'swcq' && currentPlatform === 'aa4' && s.openDate) {
        const openInfo = document.createElement('div');
        openInfo.className = 'server-info';
        
        if (s.openDate === today) {
          openInfo.innerHTML = `ğŸ“… ä»Šæ—¥å¼€æ”¾`;
          openInfo.style.color = '#10b981';
          openInfo.style.fontWeight = 'bold';
        } else {
          openInfo.textContent = `ğŸ“… ${s.openDate}`;
          
          // æ˜¾ç¤ºå¼€æœå¤©æ•°
          if (s.daysSinceOpen > 0) {
            const daysInfo = document.createElement('div');
            daysInfo.className = 'server-info';
            daysInfo.textContent = `å¼€æœç¬¬${s.daysSinceOpen}å¤©`;
            
            // å¦‚æœæ˜¯å¼€æœç¬¬ä¸‰å¤©ï¼Œç”¨ç‰¹æ®Šé¢œè‰²æ˜¾ç¤º
            if (s.daysSinceOpen === 3) {
              daysInfo.style.color = '#fbbf24';
              daysInfo.style.fontWeight = 'bold';
            }
            card.appendChild(daysInfo);
          }
        }
        card.appendChild(openInfo);
      }
      
      // æ˜¾ç¤ºå¼€æ”¾æ—¥æœŸï¼ˆæ–°æœï¼‰
      if (isNewServer && s.openDate) {
        const dateInfo = document.createElement('div');
        dateInfo.className = 'server-info';
        if (s.openDate === today) {
          dateInfo.innerHTML = `ğŸ“… ä»Šæ—¥å¼€æ”¾`;
          dateInfo.style.color = '#10b981';
          dateInfo.style.fontWeight = 'bold';
        } else {
          dateInfo.textContent = `ğŸ“… å¼€æ”¾ï¼š${s.openDate}`;
        }
        card.appendChild(dateInfo);
      }
      
      // æ„å»ºé“¾æ¥
      const url = platform.getServerUrl(s);
      
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      
      // æ·»åŠ ğŸ‘‘æ ‡è®°è¯´æ˜ï¼ˆå¦‚æœæ˜¾ç¤ºğŸ‘‘ï¼‰
      if (id === 'swcq' && currentPlatform === 'aa4' && s.shouldShowCrown) {
        const crownBadge = document.createElement('div');
        crownBadge.className = 'crown-badge';
        crownBadge.textContent = 'å¼€æœç¬¬ä¸‰å¤©æ´»åŠ¨';
        card.appendChild(crownBadge);
      }
      
      grid.appendChild(card);
    });
    
  } else if(id === '115'){
    // æ»¡Væ‚ ä¹…ä¼ å¥‡ - å¤šå¹³å°æ”¯æŒ
    const platform = game.platforms[currentYJ];
    
    // ä¸»é¡µæŒ‰é’®
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ  æ¸¸æˆä¸»é¡µ';
    homeBtn.href = platform.homepage;
    homeBtn.target = '_blank';
    const homeCard = document.createElement('div');
    homeCard.className = 'card';
    homeCard.appendChild(homeBtn);
    grid.appendChild(homeCard);
    
    // æ·»åŠ å¹³å°æ ‡è¯†
    const platformBadge = document.createElement('div');
    platformBadge.className = 'badge badge-platform';
    platformBadge.textContent = platform.name;
    homeCard.appendChild(platformBadge);
    
    // åŒºæœåˆ—è¡¨
    platform.servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = `${s}åŒº`;
      card.appendChild(title);
      
      // æ‚ ä¹…ä¼ å¥‡é“¾æ¥
      const url = platform.getServerUrl(s);
      
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      
      grid.appendChild(card);
    });
    
  } else {
    // å…¶ä»–å•å¹³å°æ¸¸æˆ
    const homeBtn = document.createElement('a');
    homeBtn.className = 'btn';
    homeBtn.textContent = 'ğŸ  æ¸¸æˆä¸»é¡µ';
    homeBtn.href = game.homepage;
    homeBtn.target = '_blank';
    const hcard = document.createElement('div');
    hcard.className = 'card';
    hcard.appendChild(homeBtn);
    grid.appendChild(hcard);
    
    game.servers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = `${s}åŒº`;
      card.appendChild(title);
      
      const url = game.getServerUrl(s);
      
      const btn = document.createElement('a');
      btn.className = 'btn';
      btn.textContent = 'ç‚¹å‡»åŒºæœ';
      btn.onclick = (e) => {
        e.preventDefault();
        if(clickMode === 'open'){
          window.open(url, '_blank');
        } else {
          navigator.clipboard.writeText(url);
          toast('å·²å¤åˆ¶é“¾æ¥');
        }
      };
      card.appendChild(btn);
      grid.appendChild(card);
    });
  }
  
  box.appendChild(grid);
  
  // å¦‚æœæ˜¯åœ£ç‹ä¼ å¥‡é¡µé¢ï¼Œæ˜¾ç¤ºæ™ºèƒ½æé†’
  if (id === 'swcq' && currentPlatform === 'aa4') {
    showReminders();
  }
}

function init(){
  // æ›´æ–°æ—¶é—´æ˜¾ç¤º
  const updateTime = () => {
    const beijingTime = getBeijingTime();
    document.getElementById('time').textContent = 'åŒ—äº¬æ—¶é—´ï¼š' + beijingTime.toLocaleString('zh-CN', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: false
    }).replace(/\//g, '-');
  };
  
  updateTime();
  setInterval(updateTime, 1000);
  
  // æ¸²æŸ“æ ‡ç­¾é¡µ
  renderTabs();
  
  // æ˜¾ç¤ºå¹³å°åˆ‡æ¢å™¨
  showPlatformSwitcher('swcq');
  
  // åˆå§‹æ¸²æŸ“å†…å®¹
  renderContent('swcq');
  
  // ç»‘å®šæ§åˆ¶æŒ‰é’®äº‹ä»¶
  const btnCopy = document.getElementById('btnCopy');
  const btnOpen = document.getElementById('btnOpen');
  
  btnCopy.onclick = () => {
    clickMode = 'copy';
    btnCopy.classList.add('active');
    btnOpen.classList.remove('active');
    toast('å¤åˆ¶æ¨¡å¼');
  };
  
  btnOpen.onclick = () => {
    clickMode = 'open';
    btnOpen.classList.add('active');
    btnCopy.classList.remove('active');
    toast('æ‰“å¼€æ¨¡å¼');
  };
}

// åˆå§‹åŒ–
init();
</script>
    <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
