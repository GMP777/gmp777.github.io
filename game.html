<!-- PART 1 / 3 - paste this first -->
<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸ®æ¸¸æˆåŒºæœå¯¼èˆª</title>
  <!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
<style>
:root{
  --bg: #071025;
  --card: #0b1220;
  --muted: #9aa4b2;
  --accent: #06b6d4;
  --accent-2: #7dd3fc;
  --event: #f59e0b;
  --text:#e6eef8;
}
*{box-sizing:border-box}
body{
  margin:0; padding:14px; font-family:"Microsoft YaHei",Arial,sans-serif;
  background: linear-gradient(180deg,var(--bg),#0b1a2a);
  color:var(--text);
}
.container{max-width:1050px;margin:0 auto;}
h1{ text-align:center; margin:6px 0 8px; font-size:20px; }
#time{ text-align:center; color:var(--muted); margin-bottom:10px; font-size:14px; }

/* tabs & controls */
.controls{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-bottom:10px; }
.ctrl-btn{ padding:8px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:rgba(255,255,255,0.03); color:var(--text); cursor:pointer; font-weight:700;}
.ctrl-btn.active{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#022; border:none;}

/* tabs */
.tabs{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-bottom:12px; }
.tab{ padding:6px 12px; border-radius:8px; cursor:pointer; background:rgba(255,255,255,0.02); color:var(--muted); border:1px solid rgba(255,255,255,0.03); font-weight:700; }
.tab.active{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#022; border:none; }

/* grid & cards */
.grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:12px; margin-bottom:18px; }
.card{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:12px; border-radius:12px; text-align:center; box-shadow:0 6px 18px rgba(2,6,23,0.6); }
.card .title{ font-weight:800; font-size:15px; margin-bottom:8px; color:#fff; }

/* uniform button for homepage / site switch / server (all same style) */
.btn{
  display:inline-block; width:100%; box-sizing:border-box;
  padding:9px 8px; border-radius:10px; font-weight:800;
  border:1px solid rgba(255,255,255,0.04);
  background:rgba(255,255,255,0.02); color:var(--text);
  text-decoration:none; cursor:pointer; font-size:14px;
}
.btn:active{ transform:translateY(1px); }
.btn:hover{ background:var(--accent); color:#022; border-color:transparent; }

/* badge area */
.badges{ display:flex; gap:6px; justify-content:center; flex-wrap:wrap; margin-top:8px; }
.badge{ padding:4px 8px; border-radius:999px; font-weight:800; font-size:12px; color:#022; background:var(--accent); }
.badge-event{ background: linear-gradient(90deg, #f59e0b, #fb923c); color:#111; }

/* toast */
#toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:28px; display:none; z-index:9999; padding:10px 16px; border-radius:999px; font-weight:800; box-shadow:0 6px 24px rgba(6,22,34,0.6); }

/* responsiveness tweaks */
@media (max-width:520px){
  .grid{ grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:8px; }
  .btn{ padding:8px 6px; font-size:13px; border-radius:8px; }
}
</style>
</head>
<body>
  <div class="container">
    <div id="time">åŒ—äº¬æ—¶é—´åŠ è½½ä¸­â€¦</div>

    <div class="controls">
      <button id="btnCopy" class="ctrl-btn active">ğŸ“‹ å¤åˆ¶æ¨¡å¼ï¼ˆå…¨ç«™ï¼‰</button>
      <button id="btnOpen" class="ctrl-btn">ğŸ”— æ‰“å¼€æ¨¡å¼ï¼ˆå…¨ç«™ï¼‰</button>
    </div>

    <div class="tabs" id="tabs"></div>

    <div id="content"></div>

    <div id="toast"></div>

    <footer style="text-align:center;color:var(--muted);margin-top:12px;font-size:13px;">é¡µé¢å·²å°±ç»ª</footer>
  </div>

  <!-- å¼€å§‹è„šæœ¬ï¼ˆéƒ¨åˆ†æ”¾åœ¨ Part 2ï¼‰ -->
  <script>
/* PART 2 / 3 - paste this second (JS main body) */
/* æ³¨æ„ï¼šè¿™æ®µä¸è¦å•ç‹¬åŠ  <script>ï¼ˆç¬¬ä¸€æ®µå·²æ‰“å¼€ï¼‰ï¼Œç›´æ¥ç²˜è´´å³å¯ã€‚ */

(function(){
  /* ---------- å…¨å±€çŠ¶æ€ ---------- */
  let clickMode = 'copy'; // å…¨ç«™é»˜è®¤å¤åˆ¶æ¨¡å¼ï¼ˆå…¨å±€é€šç”¨ï¼‰
  let swcqSite = '9awan'; // '9awan' | '3uyy' | 'aa4'
  let yjSite = 'yx4f';    // 'yx4f' | '962yx'

  const MS_DAY = 24*60*60*1000;

  /* ---------- åˆæœåˆ†ç»„ï¼ˆä¿ç•™ä¸‰æ®µï¼‰ ----------
     2091â€“2097  -> 2025-10-28
     2098â€“2104  -> 2025-10-31
     2105â€“2111  -> 2025-11-02
     ï¼ˆåŒºæœæ€»ä½“åˆ° 2116ï¼›2112â€“2116 æ²¡åœ¨åˆæœæ®µé‡Œï¼‰
  */
  const mergeGroups = [
    { from: 2091, to: 2097, date: '2025-10-28' },
    { from: 2098, to: 2104, date: '2025-10-31' },
    { from: 2105, to: 2111, date: '2025-11-02' }
  ];

  /* ---------- æ¸¸æˆæ•°æ® ---------- */
  const games = [
    {
      id: 'swcq',
      name: 'åœ£ç‹ä¼ å¥‡',
      homepage9awan: 'http://www.9awan.com/home/server/283',
      homepage3uyy:  'http://88.3uyy.com/home/server/283',
      homepageAA4:   'http://aa4.cn/home/server/283',
      // servers 2091..2116 mapped to real ids starting 98471
      servers: Array.from({length: 2116 - 2091 + 1}, (_, i) => ({ show: 2091 + i, real: 98471 + i }))
    },
    {
      id: '111',
      name: 'æ»¡Våˆ‡å‰²ç¥åŸŸ',
      homepage: 'http://gm.yx4f.com:81/games/111.html',
      servers: [235,236,237,248,249,250,251,252,253,254,259,260,261,262,263,264,265,275,276,277]
    },
    {
      id: '115',
      name: 'æ»¡Væ‚ ä¹…ä¼ å¥‡',
      homepage: 'http://gm.yx4f.com:81/games/115.html',
      homepage2: 'http://gm.962yx.com/games/115.html',
      servers: [105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124]
    },
    {
      id: '137',
      name: 'GMèµ¤ç„°æ— åŒ',
      homepage: 'http://gm.yx4f.com:81/games/137.html',
      servers: [1,2,3,4,5,6,7,8,9,10,11,12]
    },
    {
      id: 'ts',
      name: 'å± ç¥',
      homepage: 'http://www.8syx.com/game/7/',
      servers: [25,26,30,31,35,36]
    }
  ];

  /* ---------- è¾…åŠ©ï¼šåŒ—äº¬å½“å‰æ—¶é—´/æ—¥æœŸ ---------- */
  function beijingNow(){
    const now = new Date();
    return new Date(now.getTime() + (8*60 - now.getTimezoneOffset())*60000);
  }
  function beijingStartOfToday(){
    const bj = beijingNow();
    return new Date(bj.getFullYear(), bj.getMonth(), bj.getDate(), 0,0,0,0);
  }

  /* ---------- è®¡ç®—åˆæœç¬¬å‡ å¤©ï¼ˆåŒä¸€å¤©è¿”å› 1ï¼‰ ---------- */
  function daysSince(dateStr){
    const start = new Date(dateStr + 'T00:00:00+08:00');
    const todayStart = new Date(beijingNow().toLocaleDateString('en-CA') + 'T00:00:00+08:00');
    const diff = Math.floor((todayStart - start) / MS_DAY) + 1;
    return diff;
  }

  function findMergeGroup(serverShow){
    return mergeGroups.find(g => serverShow >= g.from && serverShow <= g.to) || null;
  }

  /* ---------- UI helpers ---------- */
  const $ = (id) => document.getElementById(id);
  function showToast(msg){
    const t = $('toast');
    t.textContent = msg;
    t.style.display = 'block';
    t.style.background = clickMode === 'open' ? 'linear-gradient(90deg,#34d399,#06b6d4)' : 'linear-gradient(90deg,var(--accent),var(--accent-2))';
    t.style.color = '#022';
    t.style.opacity = '1';
    setTimeout(()=>{ t.style.transition = 'opacity .25s'; t.style.opacity = '0'; setTimeout(()=>t.style.display = 'none', 260); }, 1400);
  }

  /* ---------- æ¸²æŸ“æ ‡ç­¾ï¼ˆæ¸¸æˆ tabsï¼‰ ---------- */
  function renderTabs(){
    const tabRoot = $('tabs');
    tabRoot.innerHTML = '';
    games.forEach((g, idx) => {
      const btn = document.createElement('button');
      btn.className = 'tab' + (g.id === 'swcq' ? ' active' : '');
      btn.textContent = g.name;
      btn.onclick = () => {
        document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
        btn.classList.add('active');
        renderContent(g.id);
      };
      tabRoot.appendChild(btn);
    });
  }

  /* ---------- ç”ŸæˆæœåŠ¡å™¨å¡ç‰‡ç»Ÿä¸€é€»è¾‘ï¼ˆæŒ‰é’®æ ·å¼ä¸è¡Œä¸ºéƒ½ä¸€æ ·ï¼‰ ---------- */
  function createServerCard({label, url, badges=[]}){
    const c = document.createElement('div');
    c.className = 'card';

    const t = document.createElement('div');
    t.className = 'title';
    t.textContent = label;
    c.appendChild(t);

    const btn = document.createElement('a');
    btn.className = 'btn';
    btn.textContent = label; // ç›´æ¥æ˜¾ç¤ºåŒºæœååœ¨æŒ‰é’®ä¸Šï¼Œç”¨æˆ·ç‚¹ä»»æ„åŒºæœå³å¯æ“ä½œ
    btn.href = url;
    btn.onclick = (e) => {
      e.preventDefault();
      if(clickMode === 'open') {
        window.open(url, '_blank');
      } else {
        navigator.clipboard.writeText(url).then(()=> showToast('å·²å¤åˆ¶é“¾æ¥'), ()=> showToast('å¤åˆ¶å¤±è´¥'));
      }
    };
    c.appendChild(btn);

    if(badges.length > 0){
      const bwrap = document.createElement('div');
      bwrap.className = 'badges';
      badges.forEach(b => {
        const bd = document.createElement('div');
        bd.className = 'badge' + (b.type === 'event' ? ' badge-event' : '');
        bd.textContent = b.text;
        bwrap.appendChild(bd);
      });
      c.appendChild(bwrap);
    }

    return c;
  }

  /* ---------- æ¸²æŸ“æŸä¸ªæ¸¸æˆçš„å†…å®¹ ---------- */
  function renderContent(gameId){
    const root = $('content');
    root.innerHTML = '';

    const game = games.find(g => g.id === gameId);
    if(!game) return;

    const grid = document.createElement('div');
    grid.className = 'grid';

    // special: SWCQ has multi-site switch + three homepages
    if(game.id === 'swcq'){
      // site switch controls (3-site)
      const siteCard = document.createElement('div'); siteCard.className = 'card';
      const siteBtn = document.createElement('a'); siteBtn.className = 'btn';
      siteBtn.textContent = 'ğŸŒ ' + (swcqSite === '9awan' ? '9aç©' : (swcqSite === '3uyy' ? '3UYY' : 'AA4'));
      siteBtn.href = '#';
      siteBtn.onclick = (e) => {
        e.preventDefault();
        // rotate sites 9awan -> 3uyy -> aa4 -> 9awan
        swcqSite = swcqSite === '9awan' ? '3uyy' : (swcqSite === '3uyy' ? 'aa4' : '9awan');
        showToast('åœ£ç‹ä¼ å¥‡ç«™ç‚¹åˆ‡æ¢ï¼š' + swcqSite);
        renderContent('swcq');
      };
      siteCard.appendChild(siteBtn);
      grid.appendChild(siteCard);

      // homepage card (å¼€æœè¡¨) - choose appropriate homepage url
      const homeCard = document.createElement('div'); homeCard.className = 'card';
      const hp = document.createElement('a'); hp.className = 'btn';
      hp.textContent = 'ğŸ“… å¼€æœè¡¨';
      hp.href = swcqSite === '9awan' ? game.homepage9awan : (swcqSite === '3uyy' ? game.homepage3uyy : game.homepageAA4);
      hp.target = '_blank';
      homeCard.appendChild(hp);
      grid.appendChild(homeCard);

      // servers: iterate through game.servers
      const today = beijingNow();
      const wk = today.getDay(); // 0 Sun ... 6 Sat
      const showWedSat = (wk === 3 || wk === 6);

      game.servers.forEach(s => {
        const merge = findMergeGroup(s.show);
        const badges = [];
        if(merge){
          const md = daysSince(merge.date);
          badges.push({ text: `åˆæœç¬¬ ${md} å¤©`, type: 'day' });
          if(md === 3) badges.push({ text: 'ğŸ‘‘ åŸä¸»æˆ˜', type: 'event' });
          if(md >= 1 && showWedSat) badges.push({ text: 'ğŸ° å…¬ä¼šæˆ˜æ—¥', type: 'event' });
        }
        // compute url (same format across sites)
        const serverUrl = swcqSite === '9awan'
          ? `http://www.9awan.com/game.php?action=play&game_id=283&server_id=${s.real}`
          : (swcqSite === '3uyy'
            ? `http://88.3uyy.com/game.php?action=play&game_id=283&server_id=${s.real}`
            : `http://aa4.cn/game.php?action=play&game_id=283&server_id=${s.real}`);
        const card = createServerCard({ label: `${s.show}åŒº`, url: serverUrl, badges });
        grid.appendChild(card);
      });

      root.appendChild(grid);
      return;
    }

    // other games: unified style. For æ‚ ä¹…ä¼ å¥‡ (id '115') we provide site switch (yx4f/962yx)
    if(game.id === '115'){
      const sCard = document.createElement('div'); sCard.className = 'card';
      const sBtn = document.createElement('a'); sBtn.className = 'btn';
      sBtn.href = '#';
      sBtn.textContent = 'ğŸŒ ' + (yjSite === 'yx4f' ? 'yx4f' : '962yx');
      sBtn.onclick = (e) => { e.preventDefault(); yjSite = yjSite === 'yx4f' ? '962yx' : 'yx4f'; showToast('æ‚ ä¹…ä¼ å¥‡ç«™ç‚¹åˆ‡æ¢ï¼š' + yjSite); renderContent('115'); };
      sCard.appendChild(sBtn);
      grid.appendChild(sCard);
    }

    // homepage card for other games
    const homeCard = document.createElement('div'); homeCard.className = 'card';
    const homeBtn = document.createElement('a'); homeBtn.className = 'btn';
    if(game.id === '115') homeBtn.href = (yjSite === 'yx4f' ? game.homepage : game.homepage2);
    else homeBtn.href = (game.homepage || '#');
    homeBtn.target = '_blank';
    homeBtn.textContent = 'ğŸ  æ¸¸æˆä¸»é¡µ';
    homeCard.appendChild(homeBtn);
    grid.appendChild(homeCard);

    // server cards
    game.servers.forEach(s => {
      let url = '#';
      if(game.id === '111') url = `http://gm.yx4f.com:81/login/111/${s}.html`;
      else if(game.id === '115') url = (yjSite === 'yx4f' ? `http://gm.yx4f.com:81/login/115/${s}.html` : `http://gm.962yx.com/login/115/${s}.html`);
      else if(game.id === '137') url = `http://gm.yx4f.com:81/login/137/${s}.html`;
      else if(game.id === 'ts') url = `http://www.8syx.com/Game/gameto.php?gid=7&sid=${s}`;

      const card = createServerCard({ label: `${s}åŒº`, url, badges: [] });
      grid.appendChild(card);
    });

    root.appendChild(grid);
  }

  /* ---------- ä¸»å…¥å£ï¼šæ¸²æŸ“ tabs + initial content + bind controls ---------- */
  function init(){
    renderTabs();
    renderContent('swcq'); // default show åœ£ç‹ä¼ å¥‡

    // realtime Beijing time
    const timeEl = $('time');
    function tick(){
      const now = beijingNow();
      timeEl.textContent = 'åŒ—äº¬æ—¶é—´ï¼š' + now.toLocaleString('zh-CN', { hour12: false });
    }
    tick(); setInterval(tick, 1000);

    // bind global copy/open buttons
    $('btnCopy').addEventListener('click', () => {
      clickMode = 'copy';
      $('btnCopy').classList.add('active'); $('btnOpen').classList.remove('active');
      const toastEl = $('toast'); toastEl.style.background = 'linear-gradient(90deg,var(--accent),var(--accent-2))'; showToast('å¤åˆ¶æ¨¡å¼ï¼ˆå…¨ç«™ï¼‰');
    });
    $('btnOpen').addEventListener('click', () => {
      clickMode = 'open';
      $('btnOpen').classList.add('active'); $('btnCopy').classList.remove('active');
      $('toast').style.background = 'linear-gradient(90deg,#34d399,#06b6d4)'; showToast('æ‰“å¼€æ¨¡å¼ï¼ˆå…¨ç«™ï¼‰');
    });

    // helper $
    function $(id){ return document.getElementById(id); }
  }

  // expose helper to this closure
  function $(id){ return document.getElementById(id); }

  // kick off
  init();

  // small export for dev console debugging (optional)
  window._swcqApp = { games, mergeGroups, getState: () => ({ clickMode, swcqSite, yjSite }) };

})();
/* PART 3 / 3 - paste this last (close script & html) */
  </script>
    <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
