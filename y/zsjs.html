<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ’é’»çŸ³è®¡ç®—å™¨ğŸ§®</title>
<!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 1100px;
            width: 100%;
            background: rgba(30, 30, 46, 0.85);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 25px;
            color: #ffcc00;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            line-height: 1.5;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        th {
            background-color: rgba(255, 204, 0, 0.2);
            color: #ffcc00;
        }
        tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        input {
            width: 80px;
            padding: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-align: center;
            transition: all 0.3s;
        }
        input:focus {
            outline: none;
            border-color: #ffcc00;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
        }
        .active-input {
            border-color: #ff9900;
            background: rgba(255, 153, 0, 0.2);
            box-shadow: 0 0 10px rgba(255, 153, 0, 0.7);
        }
        .total-section {
            background: rgba(255, 204, 0, 0.15);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
        }
        .total-value {
            font-size: 28px;
            font-weight: bold;
            color: #ffcc00;
            margin: 10px 0;
        }
        .refresh-btn {
            background: linear-gradient(to right, #36D1DC, #5B86E5);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(54, 209, 220, 0.4);
        }
        .refresh-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(54, 209, 220, 0.6);
        }
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: linear-gradient(to right, #00b09b, #96c93d);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s;
        }
        .key-hint {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        .key {
            display: inline-flex;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
        }
        .key kbd {
            background: #333;
            padding: 3px 7px;
            border-radius: 4px;
            margin-right: 5px;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.5);
        }
        .completed {
            color: #4CAF50;
            font-weight: bold;
        }
        .calculation-section {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 30px;
        }
        .calculation-box {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        .calculation-box h3 {
            color: #ffcc00;
            margin-top: 0;
            text-align: center;
        }
        .calculation-result {
            flex: 1;
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .calc-btn {
            background: linear-gradient(to right, #4A00E0, #8E2DE2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: bold;
        }
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(142, 45, 226, 0.4);
        }
        .copy-btn {
            background: linear-gradient(to right, #00b09b, #96c93d);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
            font-size: 14px;
        }
        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 176, 155, 0.4);
        }
        .copy-success {
            color: #4CAF50;
            font-size: 12px;
            margin-top: 5px;
            height: 16px;
            text-align: center;
        }
        .item-list {
            text-align: left;
            font-size: 14px;
            line-height: 1.5;
        }
        .item-row {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
        }
        .item-name {
            flex: 1;
        }
        .item-count {
            background: rgba(255, 204, 0, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid rgba(255, 204, 0, 0.3);
            min-width: 60px;
            text-align: center;
        }
        .item-count:hover {
            background: rgba(255, 204, 0, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(255, 204, 0, 0.3);
        }
        .item-count.copied {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }
        .result-placeholder {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }
        .total-info {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-weight: bold;
        }
        .copy-hint {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            margin-top: 5px;
        }
        .reduction-info {
            color: #ff6b6b;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’é’»çŸ³è®¡ç®—å™¨ğŸ§®</h1>
        
        <div class="instructions">
            <p>è¯·ä¾æ¬¡å¡«å†™æ¯ä¸ªé“å…·çš„æ•°é‡ï¼š</p>
            <div class="key-hint">
                <div class="key"><kbd>Enter</kbd> ä¸‹ä¸€ä¸ªé“å…·</div>
                <div class="key"><kbd>Shift</kbd> + <kbd>â†‘</kbd> ä¸Šä¸€ä¸ªé“å…·</div>
            </div>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>é“å…·</th>
                    <th>å•ä»·ï¼ˆé’»çŸ³ï¼‰</th>
                    <th>æ•°é‡</th>
                    <th>å°è®¡ï¼ˆé’»çŸ³ï¼‰</th>
                </tr>
            </thead>
            <tbody id="items-table">
                <!-- è¡¨æ ¼å†…å®¹å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
            </tbody>
        </table>
        
        <div class="total-section">
            <h2>æ€»ä»·</h2>
            <div class="total-value" id="total-value">0 ä¸‡é’»çŸ³</div>
            <p>å·²å®Œæˆå¡«å†™ï¼š<span id="completed-count">0</span>/10</p>
            <button class="refresh-btn" id="refresh-btn">åˆ·æ–°é¡µé¢é‡æ–°å¼€å§‹</button>
        </div>
        
        <div class="calculation-section">
            <div class="calculation-box">
                <h3>50ä¸‡é’»çŸ³æ‰€éœ€é“å…·</h3>
                <div class="calculation-result" id="result-50w">
                    <div class="result-placeholder">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è®¡ç®—æ‰€éœ€é“å…·</div>
                </div>
                <button class="calc-btn" id="calc-50w">è®¡ç®—50ä¸‡é’»çŸ³é“å…·</button>
                <button class="copy-btn" id="copy-50w" style="display: none;">å¤åˆ¶å…¨éƒ¨æ•°é‡</button>
                <div class="copy-success" id="copy-success-50w"></div>
                <div class="copy-hint" id="copy-hint-50w">ç‚¹å‡»å•ä¸ªæ•°å­—å¯å¤åˆ¶è¯¥é“å…·æ•°é‡</div>
            </div>
            
            <div class="calculation-box">
                <h3>100ä¸‡é’»çŸ³æ‰€éœ€é“å…·</h3>
                <div class="calculation-result" id="result-100w">
                    <div class="result-placeholder">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è®¡ç®—æ‰€éœ€é“å…·</div>
                </div>
                <button class="calc-btn" id="calc-100w">è®¡ç®—100ä¸‡é’»çŸ³é“å…·</button>
                <button class="copy-btn" id="copy-100w" style="display: none;">å¤åˆ¶å…¨éƒ¨æ•°é‡</button>
                <div class="copy-success" id="copy-success-100w"></div>
                <div class="copy-hint" id="copy-hint-100w">ç‚¹å‡»å•ä¸ªæ•°å­—å¯å¤åˆ¶è¯¥é“å…·æ•°é‡</div>
            </div>
        </div>
    </div>

    <script>
        // é“å…·æ•°æ®
        const itemsData = [
            { name: "å¯ä¹", price: 10 },
            { name: "æ©™æ±", price: 20 },
            { name: "æ‰“ç«æœº", price: 50 },
            { name: "å°éŸ³å“", price: 100 },
            { name: "é¼ æ ‡", price: 200 },
            { name: "è€³æœº", price: 500 },
            { name: "æ‰‹è¡¨", price: 1000 },
            { name: "æ‰‹æœº", price: 2000 },
            { name: "æ‘©æ‰˜è½¦", price: 5000 },
            { name: "æ³•æ‹‰åˆ©", price: 10000 }
        ];

        // åˆå§‹åŒ–æ•°é‡å’Œå½“å‰æ´»åŠ¨è¾“å…¥æ¡†ç´¢å¼•
        let quantities = Array(itemsData.length).fill(0);
        let currentInputIndex = 0;

        // åˆå§‹åŒ–è¡¨æ ¼
        function initializeTable() {
            const tableBody = document.getElementById('items-table');
            tableBody.innerHTML = '';
            
            itemsData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.price.toLocaleString()}</td>
                    <td>
                        <input type="number" min="0" id="input-${index}" value="${quantities[index]}" 
                               data-index="${index}" placeholder="è¾“å…¥æ•°é‡">
                    </td>
                    <td id="subtotal-${index}">0</td>
                `;
                tableBody.appendChild(row);
            });
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            addEventListeners();
            
            // è®¾ç½®ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ä¸ºæ´»åŠ¨çŠ¶æ€
            setActiveInput(0);
            
            // æ›´æ–°è¿›åº¦å’Œæ€»è®¡
            updateProgress();
            calculateTotal();
        }

        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        function addEventListeners() {
            // è¾“å…¥æ¡†è¾“å…¥äº‹ä»¶
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.addEventListener('input', function() {
                    const index = parseInt(this.dataset.index);
                    quantities[index] = parseInt(this.value) || 0;
                    updateSubtotal(index);
                    calculateTotal();
                    updateProgress();
                });
                
                input.addEventListener('focus', function() {
                    const index = parseInt(this.dataset.index);
                    setActiveInput(index);
                });
            });
            
            // é”®ç›˜äº‹ä»¶
            document.addEventListener('keydown', function(e) {
                // å›è½¦é”® - ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†
                if (e.key === 'Enter') {
                    e.preventDefault();
                    if (currentInputIndex < itemsData.length - 1) {
                        setActiveInput(currentInputIndex + 1);
                    }
                }
                
                // Shift + ä¸Šç®­å¤´ - ä¸Šä¸€ä¸ªè¾“å…¥æ¡† (macOSä¼˜åŒ–)
                if (e.shiftKey && e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (currentInputIndex > 0) {
                        setActiveInput(currentInputIndex - 1);
                    }
                }
            });
            
            // åˆ·æ–°æŒ‰é’® - ç›´æ¥åˆ·æ–°é¡µé¢
            document.getElementById('refresh-btn').addEventListener('click', function() {
                location.reload();
            });
            
            // è®¡ç®—æŒ‰é’®
            document.getElementById('calc-50w').addEventListener('click', function() {
                calculateRequiredItems(500000, '50w');
            });
            
            document.getElementById('calc-100w').addEventListener('click', function() {
                calculateRequiredItems(1000000, '100w');
            });
            
            // å¤åˆ¶æŒ‰é’®
            document.getElementById('copy-50w').addEventListener('click', function() {
                copyAllItems('50w');
            });
            
            document.getElementById('copy-100w').addEventListener('click', function() {
                copyAllItems('100w');
            });
        }

        // è®¾ç½®æ´»åŠ¨è¾“å…¥æ¡†
        function setActiveInput(index) {
            // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.classList.remove('active-input');
            });
            
            // è®¾ç½®æ–°çš„æ´»åŠ¨çŠ¶æ€
            const activeInput = document.getElementById(`input-${index}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                activeInput.focus();
                currentInputIndex = index;
            }
        }

        // æ›´æ–°å°è®¡
        function updateSubtotal(index) {
            const subtotal = quantities[index] * itemsData[index].price;
            document.getElementById(`subtotal-${index}`).textContent = subtotal.toLocaleString();
        }

        // è®¡ç®—æ€»ä»·
        function calculateTotal() {
            let total = 0;
            itemsData.forEach((item, index) => {
                total += quantities[index] * item.price;
            });
            
            // è½¬æ¢ä¸ºä¸‡é’»çŸ³
            const totalInTenThousand = total / 10000;
            document.getElementById('total-value').textContent = `${totalInTenThousand.toFixed(2)} ä¸‡é’»çŸ³`;
        }

        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const filledCount = quantities.filter(q => q > 0).length;
            const progressPercentage = (filledCount / itemsData.length) * 100;
            
            document.getElementById('progress').style.width = `${progressPercentage}%`;
            document.getElementById('completed-count').textContent = filledCount;
            
            // å¦‚æœå…¨éƒ¨å¡«å†™å®Œæˆï¼Œæ·»åŠ å®Œæˆæç¤º
            if (filledCount === itemsData.length) {
                document.getElementById('completed-count').classList.add('completed');
            } else {
                document.getElementById('completed-count').classList.remove('completed');
            }
        }

        // è®¡ç®—æŒ‡å®šé’»çŸ³æ•°é‡æ‰€éœ€é“å…·ï¼ˆåå‘è®¡ç®—ï¼‰
        function calculateRequiredItems(targetDiamonds, id) {
            // è®¡ç®—å½“å‰æ€»é’»çŸ³æ•°
            let currentTotal = 0;
            itemsData.forEach((item, index) => {
                currentTotal += quantities[index] * item.price;
            });
            
            // è®¡ç®—ä¸ç›®æ ‡çš„å·®å€¼
            const difference = currentTotal - targetDiamonds;
            
            if (difference <= 0) {
                // å¦‚æœå½“å‰æ•°é‡ä¸è¶³ï¼Œè®¡ç®—éœ€è¦è¡¥å……çš„é“å…·
                calculateAdditionalItems(targetDiamonds, id, currentTotal);
            } else {
                // å¦‚æœå½“å‰æ•°é‡è¶…è¿‡ï¼Œè®¡ç®—éœ€è¦å‡å°‘çš„é“å…·
                calculateReductionItems(targetDiamonds, id, currentTotal, difference);
            }
        }

        // è®¡ç®—éœ€è¦è¡¥å……çš„é“å…·ï¼ˆå½“å‰æ•°é‡ä¸è¶³ï¼‰
        function calculateAdditionalItems(targetDiamonds, id, currentTotal) {
            const neededDiamonds = targetDiamonds - currentTotal;
            let remainingDiamonds = neededDiamonds;
            const finalQuantities = [...quantities]; // å¤åˆ¶å½“å‰æ•°é‡
            
            // ä»æœ€è´µçš„é“å…·å¼€å§‹è®¡ç®—éœ€è¦è¡¥å……çš„æ•°é‡
            for (let i = itemsData.length - 1; i >= 0; i--) {
                if (remainingDiamonds <= 0) break;
                
                const item = itemsData[i];
                const maxCount = Math.floor(remainingDiamonds / item.price);
                
                if (maxCount > 0) {
                    finalQuantities[i] += maxCount;
                    remainingDiamonds -= maxCount * item.price;
                }
            }
            
            // æ˜¾ç¤ºç»“æœ
            displayFinalItems(finalQuantities, id, targetDiamonds, currentTotal, 'è¡¥å……');
        }

        // è®¡ç®—éœ€è¦å‡å°‘çš„é“å…·ï¼ˆå½“å‰æ•°é‡è¶…è¿‡ï¼‰
        function calculateReductionItems(targetDiamonds, id, currentTotal, excessDiamonds) {
            let remainingReduction = excessDiamonds;
            const finalQuantities = [...quantities]; // å¤åˆ¶å½“å‰æ•°é‡
            
            // ä»æœ€ä¾¿å®œçš„é“å…·å¼€å§‹è®¡ç®—éœ€è¦å‡å°‘çš„æ•°é‡
            for (let i = 0; i < itemsData.length; i++) {
                if (remainingReduction <= 0) break;
                
                const item = itemsData[i];
                const currentCount = finalQuantities[i];
                
                if (currentCount > 0) {
                    // è®¡ç®—æœ€å¤šå¯ä»¥å‡å°‘å¤šå°‘ä¸ªè¿™ç§é“å…·
                    const maxReduction = Math.min(
                        currentCount,
                        Math.ceil(remainingReduction / item.price)
                    );
                    
                    if (maxReduction > 0) {
                        finalQuantities[i] -= maxReduction;
                        remainingReduction -= maxReduction * item.price;
                    }
                }
            }
            
            // æ˜¾ç¤ºç»“æœ
            displayFinalItems(finalQuantities, id, targetDiamonds, currentTotal, 'å‡å°‘');
        }

        // æ˜¾ç¤ºæœ€ç»ˆé“å…·æ•°é‡
        function displayFinalItems(finalQuantities, id, targetDiamonds, currentTotal, operation) {
            const resultElement = document.getElementById(`result-${id}`);
            let html = '<div class="item-list">';
            let finalTotal = 0;
            let hasItems = false;
            
            itemsData.forEach((item, index) => {
                if (finalQuantities[index] > 0) {
                    const itemTotal = finalQuantities[index] * item.price;
                    finalTotal += itemTotal;
                    hasItems = true;
                    
                    html += `
                        <div class="item-row">
                            <span class="item-name">${item.name}</span>
                            <span class="item-count" data-item="${item.name}" data-count="${finalQuantities[index]}">${finalQuantities[index].toLocaleString()}</span>
                        </div>
                    `;
                }
            });
            
            if (!hasItems) {
                html += `<div>æ— éœ€ä»»ä½•é“å…·</div>`;
            }
            
            html += `<div class="total-info">`;
            html += `<div>å½“å‰: ${(currentTotal/10000).toFixed(2)}ä¸‡é’»çŸ³</div>`;
            html += `<div>ç›®æ ‡: ${(targetDiamonds/10000).toFixed(0)}ä¸‡é’»çŸ³</div>`;
            html += `<div>æœ€ç»ˆ: ${(finalTotal/10000).toFixed(2)}ä¸‡é’»çŸ³</div>`;
            if (operation) {
                html += `<div class="reduction-info">æ“ä½œ: ${operation}é“å…·ä»¥è¾¾åˆ°ç›®æ ‡</div>`;
            }
            html += `</div>`;
            html += `</div>`;
            
            resultElement.innerHTML = html;
            
            // æ·»åŠ ç‚¹å‡»å¤åˆ¶äº‹ä»¶
            addCopyEventListeners(id);
            
            // å­˜å‚¨æ•°æ®ç”¨äºå¤åˆ¶
            resultElement.dataset.finalQuantities = JSON.stringify(finalQuantities);
            resultElement.dataset.targetDiamonds = targetDiamonds;
            
            // æ˜¾ç¤ºå¤åˆ¶æŒ‰é’®å’Œæç¤º
            document.getElementById(`copy-${id}`).style.display = 'block';
            document.getElementById(`copy-hint-${id}`).style.display = 'block';
        }

        // æ·»åŠ ç‚¹å‡»å¤åˆ¶äº‹ä»¶ç›‘å¬å™¨
        function addCopyEventListeners(id) {
            const resultElement = document.getElementById(`result-${id}`);
            const countElements = resultElement.querySelectorAll('.item-count');
            
            countElements.forEach(element => {
                element.addEventListener('click', function() {
                    const count = this.getAttribute('data-count');
                    const itemName = this.getAttribute('data-item');
                    
                    // å¤åˆ¶åˆ°å‰ªè´´æ¿
                    navigator.clipboard.writeText(count).then(() => {
                        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæ•ˆæœ
                        this.classList.add('copied');
                        this.textContent = 'å·²å¤åˆ¶!';
                        
                        setTimeout(() => {
                            this.classList.remove('copied');
                            this.textContent = parseInt(count).toLocaleString();
                        }, 1000);
                        
                        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                        showCopySuccess(id, `å·²å¤åˆ¶ ${itemName} æ•°é‡: ${count}`);
                    }).catch(err => {
                        // å¦‚æœClipboard APIå¤±è´¥ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•
                        const textArea = document.createElement("textarea");
                        textArea.value = count;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand("copy");
                        document.body.removeChild(textArea);
                        
                        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæ•ˆæœ
                        this.classList.add('copied');
                        this.textContent = 'å·²å¤åˆ¶!';
                        
                        setTimeout(() => {
                            this.classList.remove('copied');
                            this.textContent = parseInt(count).toLocaleString();
                        }, 1000);
                        
                        showCopySuccess(id, `å·²å¤åˆ¶ ${itemName} æ•°é‡: ${count}`);
                    });
                });
            });
        }

        // å¤åˆ¶å…¨éƒ¨é“å…·åˆ—è¡¨
        function copyAllItems(id) {
            const resultElement = document.getElementById(`result-${id}`);
            const finalQuantities = JSON.parse(resultElement.dataset.finalQuantities || '[]');
            const targetDiamonds = parseInt(resultElement.dataset.targetDiamonds) || 0;
            
            let text = `${targetDiamonds/10000}ä¸‡é’»çŸ³æ‰€éœ€é“å…·æ•°é‡:\n\n`;
            let hasItems = false;
            
            itemsData.forEach((item, index) => {
                if (finalQuantities[index] > 0) {
                    text += `${item.name} ${finalQuantities[index].toLocaleString()}\n`;
                    hasItems = true;
                }
            });
            
            if (!hasItems) {
                showCopySuccess(id, "æ²¡æœ‰é“å…·å¯å¤åˆ¶");
                return;
            }
            
            // ä½¿ç”¨ç°ä»£Clipboard API
            navigator.clipboard.writeText(text).then(() => {
                showCopySuccess(id, "å·²å¤åˆ¶å…¨éƒ¨é“å…·æ•°é‡!");
            }).catch(err => {
                // å¦‚æœClipboard APIå¤±è´¥ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand("copy");
                document.body.removeChild(textArea);
                showCopySuccess(id, "å·²å¤åˆ¶å…¨éƒ¨é“å…·æ•°é‡!");
            });
        }

        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæ¶ˆæ¯
        function showCopySuccess(id, message) {
            const successElement = document.getElementById(`copy-success-${id}`);
            successElement.textContent = message;
            
            setTimeout(() => {
                successElement.textContent = '';
            }, 2000);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initializeTable);
    </script>
  <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
