<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ®</title>
  <!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .btn-group {
      margin-bottom: 15px;
    }
    .btn-group button {
      margin-right: 10px;
      padding: 8px 14px;
      font-size: 1rem;
      cursor: pointer;
      border: 1px solid #ccc;
      background-color: white;
      border-radius: 4px;
      transition: background-color 0.2s, color 0.2s;
    }
    .btn-group button.active {
      background-color: #337ab7;
      color: white;
      border-color: #2a6496;
    }
    .btn-group button:hover:not(.active) {
      background-color: #e6e6e6;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      background: white;
      margin-top: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      table-layout: fixed;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px 8px;
      text-align: center;
      word-wrap: break-word;
    }
    th {
      background-color: #f0f0f0;
    }
    a {
      color: #337ab7;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    @media (max-width: 600px) {
      table, th, td {
        font-size: 0.85rem;
        padding: 8px 4px;
      }
      .btn-group button {
        padding: 6px 10px;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <div>
    <div><strong>é€‰æ‹©æ¸¸æˆï¼š</strong></div>
    <div id="gameButtons" class="btn-group"></div>
  </div>

  <div>
    <div><strong>é€‰æ‹©åŒºæœï¼š</strong></div>
    <div id="serverButtons" class="btn-group"></div>
  </div>

  <table id="linkTable">
    <thead>
      <tr>
        <th>æ¸¸æˆå¹³å°</th>
        <th>å¤‡æ³¨</th>
        <th>ç™»å½•åŒºæœé“¾æ¥</th>
        <th>æ¸¸æˆä¸»é¡µ</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

<script>
  // æ¸¸æˆå’ŒåŒºæœæ•°æ®
  const gameData = {
    "111": { name: "åˆ‡å‰²ç¥åŸŸ", servers: ["263", "264", "265"] },
    "115": { name: "æ‚ ä¹…ä¼ å¥‡", servers: ["107", "108", "110", "112"] }
  };

  // å„å¹³å°æ•°æ®
  const platforms = [
    { name: "xayxms", base: "http://gm.xayxms.cn", remark: "xxxx" },
    { name: "395wan", base: "http://game.395wan.com", remark: "qqq,aaa" },
    { name: "99yn", base: "http://gm.99yn.cn", remark: "qqq" },
    { name: "8kyou", base: "http://www.8kyou.com:81", remark: "qqq" },
    { name: "336buy", base: "http://gm.336buy.com", remark: "æ— " },
    { name: "lovedfm", base: "http://mv.lovedfm.com", remark: "æ— " },
    { name: "42uc", base: "http://gm.42uc.com", remark: "æ— " },
    { name: "32sf", base: "http://mv.32sf.cn", remark: "æ— " }
  ];

  const gameButtons = document.getElementById('gameButtons');
  const serverButtons = document.getElementById('serverButtons');
  const tbody = document.querySelector('#linkTable tbody');

  let selectedGameId = null;
  let selectedServerId = null;

  // ç”Ÿæˆæ¸¸æˆæŒ‰é’®
  function renderGameButtons() {
    gameButtons.innerHTML = '';
    for (const [gameId, game] of Object.entries(gameData)) {
      const btn = document.createElement('button');
      btn.textContent = game.name;
      btn.dataset.gameId = gameId;
      btn.addEventListener('click', () => {
        if (selectedGameId !== gameId) {
          selectedGameId = gameId;
          selectedServerId = gameData[gameId].servers[0]; // é»˜è®¤é€‰ç¬¬ä¸€ä¸ªåŒºæœ
          updateActiveButtons();
          renderServerButtons();
          renderTable();
        }
      });
      gameButtons.appendChild(btn);
    }
  }

  // ç”ŸæˆåŒºæœæŒ‰é’®
  function renderServerButtons() {
    serverButtons.innerHTML = '';
    if (!selectedGameId) return;
    const servers = gameData[selectedGameId].servers;
    servers.forEach(sid => {
      const btn = document.createElement('button');
      btn.textContent = sid + 'åŒº';
      btn.dataset.serverId = sid;
      btn.addEventListener('click', () => {
        if (selectedServerId !== sid) {
          selectedServerId = sid;
          updateActiveButtons();
          renderTable();
        }
      });
      serverButtons.appendChild(btn);
    });
  }

  // æ›´æ–°æŒ‰é’®é«˜äº®çŠ¶æ€
  function updateActiveButtons() {
    [...gameButtons.children].forEach(btn => {
      btn.classList.toggle('active', btn.dataset.gameId === selectedGameId);
    });
    [...serverButtons.children].forEach(btn => {
      btn.classList.toggle('active', btn.dataset.serverId === selectedServerId);
    });
  }

  // æ¸²æŸ“è¡¨æ ¼å†…å®¹
  function renderTable() {
    if (!selectedGameId || !selectedServerId) return;
    tbody.innerHTML = '';

    platforms.forEach(pf => {
      const loginUrl = `${pf.base}/login/${selectedGameId}/${selectedServerId}.html`;
      const homeUrl = `${pf.base}/games/${selectedGameId}.html`;

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${pf.name}</td>
        <td>${pf.remark}</td>
        <td><a href="${loginUrl}" target="_blank">${selectedServerId}åŒºç™»å½•</a></td>
        <td><a href="${homeUrl}" target="_blank">ä¸»é¡µ</a></td>
      `;
      tbody.appendChild(row);
    });
  }

  // åˆå§‹åŒ–ï¼Œé»˜è®¤é€‰ç¬¬ä¸€ä¸ªæ¸¸æˆå’Œç¬¬ä¸€ä¸ªåŒºæœ
  function init() {
    renderGameButtons();
    // é»˜è®¤é€‰ç¬¬ä¸€ä¸ªæ¸¸æˆ
    selectedGameId = Object.keys(gameData)[0];
    selectedServerId = gameData[selectedGameId].servers[0];
    updateActiveButtons();
    renderServerButtons();
    renderTable();
  }

  init();
</script>
  <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
