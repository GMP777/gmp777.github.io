<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>商城元宝购买计算</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      text-align: center;
    }
    .item {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      margin-bottom: 5px;
    }
    .result {
      margin-top: 30px;
      font-size: 18px;
      font-weight: bold;
    }
    .details {
      margin-top: 10px;
      font-size: 16px;
    }
    footer {
  text-align: center;
  font-size: 14px;
  padding: 15px 10px;
  background-color: #f8f8f8;
  color: #333;
  border-top: 1px solid #ddd;
  margin-top: 40px;
}

footer a {
  color: #007aff; /* iPhone蓝色链接风格 */
  text-decoration: none;
  margin: 0 5px;
}

footer a:hover {
  text-decoration: underline;
}
  </style>
</head>
<body>
  <h2>商城元宝购买计算</h2>
  <div class="item">
    <label for="item1-total">极阀仙丹（3000万/个）</label>
    <input type="number" id="item1-total" placeholder="总需求数量" min="0">
    <input type="number" id="item1-owned" placeholder="已拥有数量" min="0">
  </div>
  <div class="item">
    <label for="item2-total">生肖石·无疆（120万/个）</label>
    <input type="number" id="item2-total" placeholder="总需求数量" min="0">
    <input type="number" id="item2-owned" placeholder="已拥有数量" min="0">
  </div>
  <div class="item">
    <label for="item3-total">日月精华（2万/个）</label>
    <input type="number" id="item3-total" placeholder="总需求数量" min="0">
    <input type="number" id="item3-owned" placeholder="已拥有数量" min="0">
  </div>
  <div class="result">
    <div>还需购买数量：<span id="needed"></span></div>
    <div>最终元宝总计：<span id="total"></span>（<span id="total-cn"></span>）</div>
  </div>

  <script>
    const item1Total = document.getElementById('item1-total');
    const item1Owned = document.getElementById('item1-owned');
    const item2Total = document.getElementById('item2-total');
    const item2Owned = document.getElementById('item2-owned');
    const item3Total = document.getElementById('item3-total');
    const item3Owned = document.getElementById('item3-owned');
    const totalSpan = document.getElementById('total');
    const totalCnSpan = document.getElementById('total-cn');
    const neededSpan = document.getElementById('needed');

    function convertToChinese(num) {
      const cnNums = ["零", "一", "二", "三", "四", "五", "六", "七", "八", "九"];
      const cnIntRadice = ["", "十", "百", "千"];
      const cnIntUnits = ["", "万", "亿", "兆"];

      if (num === 0) return "零";
      let str = '';
      let unitPos = 0;
      while (num > 0) {
        let section = num % 10000;
        if (section !== 0) {
          let sectionStr = '';
          let zero = true;
          for (let i = 0; i < 4; i++) {
            let digit = section % 10;
            if (digit === 0) {
              if (!zero) {
                sectionStr = cnNums[0] + sectionStr;
                zero = true;
              }
            } else {
              sectionStr = cnNums[digit] + cnIntRadice[i] + sectionStr;
              zero = false;
            }
            section = Math.floor(section / 10);
          }
          str = sectionStr.replace(/(零)+$/, '') + cnIntUnits[unitPos] + str;
        } else {
          str = cnNums[0] + str;
        }
        unitPos++;
        num = Math.floor(num / 10000);
      }
      return str.replace(/(零)+/g, "零").replace(/零+$/g, "").replace(/^一十/, "十");
    }

    function calculateTotal() {
      const count1 = Math.max((parseInt(item1Total.value) || 0) - (parseInt(item1Owned.value) || 0), 0);
      const count2 = Math.max((parseInt(item2Total.value) || 0) - (parseInt(item2Owned.value) || 0), 0);
      const count3 = Math.max((parseInt(item3Total.value) || 0) - (parseInt(item3Owned.value) || 0), 0);

      const total = count1 * 30000000 + count2 * 1200000 + count3 * 20000;

      totalSpan.textContent = total.toLocaleString();
      totalCnSpan.textContent = convertToChinese(total) + '元宝';
      neededSpan.textContent = `极阀仙丹 ${count1} 个，生肖石·无疆 ${count2} 个，日月精华 ${count3} 个`;
    }

    item1Total.addEventListener('input', calculateTotal);
    item1Owned.addEventListener('input', calculateTotal);
    item2Total.addEventListener('input', calculateTotal);
    item2Owned.addEventListener('input', calculateTotal);
    item3Total.addEventListener('input', calculateTotal);
    item3Owned.addEventListener('input', calculateTotal);

    calculateTotal(); // 初始调用
  </script>
 <footer>
    <div>
      <a href="https://gmp777.github.io/">GMP777</a> |
      <a href="https://gmp777.github.io/jsq1.html">钻石计算 v1.0</a> |
      <a href="https://gmp777.github.io/jsq2.html">钻石计算 v2.0</a> |
      <a href="https://gmp777.github.io/888.html">888钻石道具计算</a> |
      <a href="https://gmp777.github.io/roll.html">抽奖钻石计算</a> |
      <a href="https://gmp777.github.io/jsq3.html">翅膀进阶计算</a> | 
      <a href="https://gmp777.github.io/jsq4.html">制作道装材料计算</a> | 
      <a href="https://gmp777.github.io/shop.html">商城元宝购买计算</a>
    </div>
  </footer>
</body>
</html>
