<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>è§’è‰²ä»»åŠ¡å¡«å†™è¡¨</title>
  <!-- è½½å…¥ footer æ ·å¼ -->
<link rel="stylesheet" href="/footer.css" />
<!-- è½½å…¥ footer æ ·å¼ -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f1f5f9;
      --card-bg: #ffffff;
      --border: #e2e8f0;
      --primary: #3b82f6;
      --primary-hover: #2563eb;
      --danger: #ef4444;
      --danger-hover: #dc2626;
      --text: #1e293b;
    }

    body {
      font-family: "Microsoft YaHei", sans-serif;
      background: var(--bg);
      padding: 20px;
      color: var(--text);
      max-width: 900px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .toolbar {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    button {
      padding: 8px 14px;
      border: none;
      border-radius: 8px;
      background: var(--primary);
      color: #fff;
      cursor: pointer;
      font-size: 15px;
      transition: background 0.2s;
    }

    button:hover { background: var(--primary-hover); }
    .danger { background: var(--danger); }
    .danger:hover { background: var(--danger-hover); }

    .card {
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.08);
      margin-bottom: 16px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .header {
      padding: 14px 16px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f8fafc;
      border-bottom: 1px solid var(--border);
    }
    .header:hover { background: #f1f5f9; }

    .content {
      display: none;
      padding: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 16px;
    }

    th, td {
      border: 1px solid var(--border);
      padding: 8px;
      text-align: left;
    }

    th {
      background: #f8fafc;
      font-weight: 600;
    }

    input[type="text"] {
      width: 80px;
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 4px 6px;
    }

    /* âœ… è£…å¤‡åŒåˆ—å¸ƒå±€ */
    .equip-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    /* âœ… ä»»åŠ¡å¤šåˆ—å¸ƒå±€ */
    .task-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    .task-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 6px 10px;
      background: #f9fafb;
    }

    /* âœ… ä¿å­˜åŒºåŸŸ */
    .save-area {
      text-align: right;
      padding-top: 10px;
      border-top: 1px solid var(--border);
      margin-top: 10px;
    }

    /* âœ… æŠ½å¡æ¬¡æ•°å‹¾é€‰æ¡† */
    .gacha-options {
      display: flex;
      gap: 16px;
      margin-bottom: 16px;
    }

    #toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.75);
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
      font-size: 15px;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <h1>ğŸ® è§’è‰²ä»»åŠ¡å¡«å†™è¡¨</h1>

  <div class="toolbar">
    <button id="exportMd">ğŸ“‹ å¯¼å‡ºä¸º Markdown</button>
    <button id="clearAll" class="danger">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰å†…å®¹</button>
  </div>

  <div id="list"></div>
  <div id="toast"></div>

  <script>
    // âœ… è´¦å· & è§’è‰²
    const roles = [
      { account: "æ‰“å·¥1å·", role: "å‰‘åœ£ä¸€å·" },
      { account: "æ‰“å·¥2å·", role: "çµç‹äºŒå·" },
      { account: "æ‰“å·¥3å·", role: "é¬¼é¢ä¸‰å·" },
      { account: "æ‰“å·¥4å·", role: "é¬¼é¢ä¸‰å·" },
      { account: "æ‰“å·¥01å·", role: "é¬¼é¢ä¸‰å·" },
      { account: "æ‰“å·¥02å·", role: "é¬¼é¢ä¸‰å·" },
      { account: "æ‰“å·¥03å·", role: "é¬¼é¢ä¸‰å·" },
      { account: "æ‰“å·¥04å·", role: "é¬¼é¢ä¸‰å·" }
    ];

    const equipsLeft = ["æ­¦å™¨","å¤´ç›”","æ‰‹è‡‚","å·¦æˆ’","è…°å¸¦"];
    const equipsRight = ["è¡£æœ","é¡¹é“¾","é•¯å­","å³æˆ’","é‹å­"];

    const tasks = [
      "èµé‡‘çŒäºº","é™é­”é“äºº","è¯•ç‚¼é“äºº",
      "å°ç¥æ³•å™¨1/4","å°ç¥æ³•å™¨2/4","å°ç¥æ³•å™¨3/4","å°ç¥æ³•å™¨4/4",
      "æ¯æ—¥å……å€¼50ä¸‡é’»çŸ³","æ¯æ—¥å……å€¼100ä¸‡é’»çŸ³"
    ];

    const gachaOptions = [1000, 2000, 3000];

    const list = document.getElementById("list");
    const toast = document.getElementById("toast");
    let cache = JSON.parse(localStorage.getItem("role-data") || "{}");

    function showToast(msg) {
      toast.textContent = msg;
      toast.style.opacity = "1";
      setTimeout(() => toast.style.opacity = "0", 1500);
    }

    roles.forEach(r => {
      const card = document.createElement("div");
      card.className = "card";

      const header = document.createElement("div");
      header.className = "header";
      header.innerHTML = `<span>${r.role}ï¼ˆ${r.account}ï¼‰</span> <span>â–¼</span>`;

      const content = document.createElement("div");
      content.className = "content";
      const saveKey = `${r.account}_${r.role}`;
      const saved = cache[saveKey] || {};

      content.innerHTML = `
        <h3>æŠ½å¡æ¬¡æ•°</h3>
        <div class="gacha-options">
          ${gachaOptions.map(val => `
            <label>
              <input type="radio" name="gacha_${saveKey}" value="${val}" ${saved.gacha==val ? 'checked' : ''}>
              ${val}æ¬¡
            </label>
          `).join("")}
        </div>

        <h3>è£…å¤‡ç­‰çº§</h3>
        <div class="equip-grid">
          <table>
            ${equipsLeft.map(eq => `
              <tr><td>${eq}</td><td><input type="text" id="${eq}_${saveKey}" value="${saved[eq] || ''}"></td></tr>
            `).join("")}
          </table>
          <table>
            ${equipsRight.map(eq => `
              <tr><td>${eq}</td><td><input type="text" id="${eq}_${saveKey}" value="${saved[eq] || ''}"></td></tr>
            `).join("")}
          </table>
        </div>

        <h3>ä»»åŠ¡å®Œæˆ</h3>
        <div class="task-grid">
          ${tasks.map(t => `
            <div class="task-item">
              <label>${t}</label>
              <input type="checkbox" id="task_${t}_${saveKey}" ${saved[t] ? 'checked' : ''}>
            </div>
          `).join("")}
        </div>

        <div class="save-area">
          <button id="save_${saveKey}">ğŸ’¾ ä¿å­˜</button>
        </div>
      `;

      header.addEventListener("click", () => {
        content.style.display = content.style.display === "block" ? "none" : "block";
      });

      content.querySelector(`#save_${saveKey}`).addEventListener("click", () => {
        const gachaEl = document.querySelector(`input[name="gacha_${saveKey}"]:checked`);
        const obj = { gacha: gachaEl ? parseInt(gachaEl.value) : null };
        [...equipsLeft, ...equipsRight].forEach(eq => obj[eq] = document.getElementById(`${eq}_${saveKey}`).value);
        tasks.forEach(t => obj[t] = document.getElementById(`task_${t}_${saveKey}`).checked);
        cache[saveKey] = obj;
        localStorage.setItem("role-data", JSON.stringify(cache));
        showToast(`${r.role} å·²ä¿å­˜ âœ…`);
      });

      card.appendChild(header);
      card.appendChild(content);
      list.appendChild(card);
    });

    document.getElementById("exportMd").addEventListener("click", () => {
      cache = JSON.parse(localStorage.getItem("role-data") || "{}");
      let md = "# è§’è‰²ä»»åŠ¡è®°å½•\n\n";
      for (const key in cache) {
        const [account, role] = key.split("_");
        const d = cache[key];
        md += `## ${role}ï¼ˆ${account}ï¼‰\n`;
        md += `- æŠ½å¡æ¬¡æ•°ï¼š${d.gacha || 0}\n\n`;
        md += `### è£…å¤‡ç­‰çº§\n`;
        [...equipsLeft, ...equipsRight].forEach(eq => md += `- ${eq}ï¼š${d[eq] || ''}\n`);
        md += `\n### ä»»åŠ¡å®Œæˆ\n`;
        tasks.forEach(t => md += `- ${t}ï¼š${d[t] ? "âœ…" : "âŒ"}\n`);
        md += "\n---\n\n";
      }
      navigator.clipboard.writeText(md);
      showToast("Markdown å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ ğŸ“‹");
    });

    document.getElementById("clearAll").addEventListener("click", () => {
      localStorage.removeItem("role-data");
      cache = {};
      document.querySelectorAll("input[type='text']").forEach(i => i.value = "");
      document.querySelectorAll("input[type='radio']").forEach(r => r.checked = false);
      document.querySelectorAll("input[type='checkbox']").forEach(c => c.checked = false);
      showToast("æ‰€æœ‰æ•°æ®å·²æ¸…é™¤ ğŸ—‘ï¸");
    });
  </script>
  <!-- Footer -->
  <div class="footer-wrapper">
    <footer id="footer-container">åŠ è½½ä¸­...</footer>
  </div>
  <script src="/load-footer.js"></script>
<!-- footer -->
</body>
</html>
